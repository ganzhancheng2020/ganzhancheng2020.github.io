<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>阿里云AI学习（二）用Pandas揭秘美国选民的总统喜好 | Jack的个人博客</title><meta name="keywords" content="数据分析,AI,阿里云,天池,pandas"><meta name="author" content="Jack Gan"><meta name="copyright" content="Jack Gan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="赛前准备前言本次赛事由开源学习组织Datawhale主办，主要带领学习者利用Python进行数据分析以及数据可视化，包含数据集的处理、数据探索与清晰、数据分析、数据可视化四部分，利用pandas、matplotlib、wordcloud等第三方库带大家玩转数据分析～还有丰富礼品等你来领取哦～学习赛事地址：https:&#x2F;&#x2F;tianchi.aliyun.com&#x2F;competition&#x2F;entrance">
<meta property="og:type" content="article">
<meta property="og:title" content="阿里云AI学习（二）用Pandas揭秘美国选民的总统喜好">
<meta property="og:url" content="https://ganzhancheng.cn/2022/11/13/%E9%98%BF%E9%87%8C%E4%BA%91AI%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%E7%94%A8Pandas%E6%8F%AD%E7%A7%98%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E7%9A%84%E6%80%BB%E7%BB%9F%E5%96%9C%E5%A5%BD/index.html">
<meta property="og:site_name" content="Jack的个人博客">
<meta property="og:description" content="赛前准备前言本次赛事由开源学习组织Datawhale主办，主要带领学习者利用Python进行数据分析以及数据可视化，包含数据集的处理、数据探索与清晰、数据分析、数据可视化四部分，利用pandas、matplotlib、wordcloud等第三方库带大家玩转数据分析～还有丰富礼品等你来领取哦～学习赛事地址：https:&#x2F;&#x2F;tianchi.aliyun.com&#x2F;competition&#x2F;entrance">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ganzhancheng.cn/img/gallery/cover10.png">
<meta property="article:published_time" content="2022-11-13T14:23:30.000Z">
<meta property="article:modified_time" content="2022-11-16T14:48:30.290Z">
<meta property="article:author" content="Jack Gan">
<meta property="article:tag" content="数据分析">
<meta property="article:tag" content="AI">
<meta property="article:tag" content="阿里云">
<meta property="article:tag" content="天池">
<meta property="article:tag" content="pandas">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ganzhancheng.cn/img/gallery/cover10.png"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://ganzhancheng.cn/2022/11/13/%E9%98%BF%E9%87%8C%E4%BA%91AI%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%E7%94%A8Pandas%E6%8F%AD%E7%A7%98%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E7%9A%84%E6%80%BB%E7%BB%9F%E5%96%9C%E5%A5%BD/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"4JML5TCPV7","apiKey":"99b309d6e0cd73467de8740a39cef07f","indexName":"ganzhancheng2020.github.io","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: {"path":"http://localhost:8000/","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '阿里云AI学习（二）用Pandas揭秘美国选民的总统喜好',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-11-16 22:48:30'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">28</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">26</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 目录</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-solid fa-folder"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/%E7%BC%96%E7%A8%8B%E7%AC%94%E8%AE%B0/"><i class="fa-fw fa-solid fa-terminal"></i><span> 编程笔记</span></a></li><li><a class="site-page child" href="/categories/%E8%BF%90%E5%8A%A8%E5%81%A5%E5%BA%B7/"><i class="fa-fw fa-solid fa-basketball"></i><span> 运动健康</span></a></li><li><a class="site-page child" href="/categories/%E8%B4%A2%E5%AF%8C%E5%AF%86%E7%A0%81/"><i class="fa-fw fa-solid fa-money-bill"></i><span> 财富密码</span></a></li><li><a class="site-page child" href="/categories/%E4%BA%BA%E9%99%85%E5%85%B3%E7%B3%BB/"><i class="fa-fw fa-solid fa-handshake"></i><span> 人际关系</span></a></li><li><a class="site-page child" href="/categories/%E6%80%9D%E7%BB%B4%E6%A8%A1%E5%9E%8B/"><i class="fa-fw fa-sharp fa-solid fa-brain"></i><span> 思维模型</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-solid fa-solid fa-gamepad"></i><span> 娱乐</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/books/"><i class="fa-fw fa-solid fa-book"></i><span> 书籍</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fa-solid fa-gamepad"></i><span> 游戏</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fa-solid fa-image"></i><span> 图库</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/aboutMe/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/gallery/cover10.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Jack的个人博客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 目录</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-solid fa-folder"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/%E7%BC%96%E7%A8%8B%E7%AC%94%E8%AE%B0/"><i class="fa-fw fa-solid fa-terminal"></i><span> 编程笔记</span></a></li><li><a class="site-page child" href="/categories/%E8%BF%90%E5%8A%A8%E5%81%A5%E5%BA%B7/"><i class="fa-fw fa-solid fa-basketball"></i><span> 运动健康</span></a></li><li><a class="site-page child" href="/categories/%E8%B4%A2%E5%AF%8C%E5%AF%86%E7%A0%81/"><i class="fa-fw fa-solid fa-money-bill"></i><span> 财富密码</span></a></li><li><a class="site-page child" href="/categories/%E4%BA%BA%E9%99%85%E5%85%B3%E7%B3%BB/"><i class="fa-fw fa-solid fa-handshake"></i><span> 人际关系</span></a></li><li><a class="site-page child" href="/categories/%E6%80%9D%E7%BB%B4%E6%A8%A1%E5%9E%8B/"><i class="fa-fw fa-sharp fa-solid fa-brain"></i><span> 思维模型</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-solid fa-solid fa-gamepad"></i><span> 娱乐</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/books/"><i class="fa-fw fa-solid fa-book"></i><span> 书籍</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fa-solid fa-gamepad"></i><span> 游戏</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fa-solid fa-image"></i><span> 图库</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/aboutMe/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">阿里云AI学习（二）用Pandas揭秘美国选民的总统喜好</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-11-13T14:23:30.000Z" title="发表于 2022-11-13 22:23:30">2022-11-13</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-16T14:48:30.290Z" title="更新于 2022-11-16 22:48:30">2022-11-16</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BC%96%E7%A8%8B%E7%AC%94%E8%AE%B0/">编程笔记</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BC%96%E7%A8%8B%E7%AC%94%E8%AE%B0/AI%E5%AD%A6%E4%B9%A0/">AI学习</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">7.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>37分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="阿里云AI学习（二）用Pandas揭秘美国选民的总统喜好"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h3 id="赛前准备"><a href="#赛前准备" class="headerlink" title="赛前准备"></a>赛前准备</h3><h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>本次赛事由开源学习组织Datawhale主办，主要带领学习者利用Python进行数据分析以及数据可视化，包含数据集的处理、数据探索与清晰、数据分析、数据可视化四部分，利用pandas、matplotlib、wordcloud等第三方库带大家玩转数据分析～还有丰富礼品等你来领取哦～<br></br>学习赛事地址：<a target="_blank" rel="noopener" href="https://tianchi.aliyun.com/competition/entrance/531837/introduction">https://tianchi.aliyun.com/competition/entrance/531837/introduction</a></p>
<h4 id="数据集来源介绍"><a href="#数据集来源介绍" class="headerlink" title="数据集来源介绍"></a>数据集来源介绍</h4><p><strong>所有候选人信息</strong><br></br>该文件为每个候选人提供一份记录，并显示候选人的信息、总收入、从授权委员会收到的转账、付款总额、给授权委员会的转账、库存现金总额、贷款和债务以及其他财务汇总信息。<br></br>数据字段描述详细:<a target="_blank" rel="noopener" href="https://www.fec.gov/campaign-finance-data/all-candidates-file-description/">https://www.fec.gov/campaign-finance-data/all-candidates-file-description/</a><br></br>关键字段说明</p>
<ul>
<li>CAND_ID 候选人ID</li>
<li>CAND_NAME 候选人姓名</li>
<li>CAND_PTY_AFFILIATION 候选人党派</li>
</ul>
<p></br>数据来源:<a target="_blank" rel="noopener" href="https://www.fec.gov/files/bulk-downloads/2020/weball20.zip">https://www.fec.gov/files/bulk-downloads/2020/weball20.zip</a></p>
<p><strong>候选人委员会链接信息</strong><br></br>该文件显示候选人的身份证号码、候选人的选举年份、联邦选举委员会选举年份、委员会识别号、委员会类型、委员会名称和链接标识号。<br></br>信息描述详细:<a target="_blank" rel="noopener" href="https://www.fec.gov/campaign-finance-data/candidate-committee-linkage-file-description/">https://www.fec.gov/campaign-finance-data/candidate-committee-linkage-file-description/</a><br></br>关键字段说明</p>
<ul>
<li>CAND_ID 候选人ID</li>
<li>CAND_ELECTION_YR 候选人选举年份</li>
<li>CMTE_ID 委员会ID</li>
</ul>
<p></br>数据来源:<a target="_blank" rel="noopener" href="https://www.fec.gov/files/bulk-downloads/2020/ccl20.zip">https://www.fec.gov/files/bulk-downloads/2020/ccl20.zip</a></p>
<p><strong>个人捐款档案信息</strong><br>【注意】由于文件较大，本数据集只包含2020.7.22-2020.8.20的相关数据，如果需要更全数据可以通过数据来源中的地址下载。<br></br>该文件包含有关收到捐款的委员会、披露捐款的报告、提供捐款的个人、捐款日期、金额和有关捐款的其他信息。<br></br>信息描述详细:<a target="_blank" rel="noopener" href="https://www.fec.gov/campaign-finance-data/contributions-individuals-file-description/">https://www.fec.gov/campaign-finance-data/contributions-individuals-file-description/</a><br></br>关键字段说明</p>
<ul>
<li>CMTE_ID  委员会ID</li>
<li>NAME 捐款人姓名</li>
<li>CITY 捐款人所在市</li>
<li>State 捐款人所在州</li>
<li>EMPLOYER 捐款人雇主&#x2F;公司</li>
<li>OCCUPATION 捐款人职业</li>
</ul>
<p></br>数据来源:<a target="_blank" rel="noopener" href="https://www.fec.gov/files/bulk-downloads/2020/indiv20.zip">https://www.fec.gov/files/bulk-downloads/2020/indiv20.zip</a></p>
<h4 id="需要提前安装的包"><a href="#需要提前安装的包" class="headerlink" title="需要提前安装的包"></a>需要提前安装的包</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装词云处理包wordcloud</span></span><br><span class="line">!pip install wordcloud --user</span><br></pre></td></tr></table></figure>

<pre><code>Looking in indexes: https://pypi.tuna.tsinghua.edu.cn/simple
Requirement already satisfied: wordcloud in /Users/jackgan/.local/lib/python3.9/site-packages (1.8.2.2)
Requirement already satisfied: pillow in /Users/jackgan/opt/anaconda3/lib/python3.9/site-packages (from wordcloud) (9.0.1)
Requirement already satisfied: numpy&gt;=1.6.1 in /Users/jackgan/opt/anaconda3/lib/python3.9/site-packages (from wordcloud) (1.21.5)
Requirement already satisfied: matplotlib in /Users/jackgan/opt/anaconda3/lib/python3.9/site-packages (from wordcloud) (3.5.1)
Requirement already satisfied: pyparsing&gt;=2.2.1 in /Users/jackgan/opt/anaconda3/lib/python3.9/site-packages (from matplotlib-&gt;wordcloud) (3.0.4)
Requirement already satisfied: kiwisolver&gt;=1.0.1 in /Users/jackgan/opt/anaconda3/lib/python3.9/site-packages (from matplotlib-&gt;wordcloud) (1.3.2)
Requirement already satisfied: cycler&gt;=0.10 in /Users/jackgan/opt/anaconda3/lib/python3.9/site-packages (from matplotlib-&gt;wordcloud) (0.11.0)
Requirement already satisfied: fonttools&gt;=4.22.0 in /Users/jackgan/opt/anaconda3/lib/python3.9/site-packages (from matplotlib-&gt;wordcloud) (4.25.0)
Requirement already satisfied: packaging&gt;=20.0 in /Users/jackgan/opt/anaconda3/lib/python3.9/site-packages (from matplotlib-&gt;wordcloud) (21.3)
Requirement already satisfied: python-dateutil&gt;=2.7 in /Users/jackgan/opt/anaconda3/lib/python3.9/site-packages (from matplotlib-&gt;wordcloud) (2.8.2)
Requirement already satisfied: six&gt;=1.5 in /Users/jackgan/opt/anaconda3/lib/python3.9/site-packages (from python-dateutil&gt;=2.7-&gt;matplotlib-&gt;wordcloud) (1.16.0)
</code></pre>
<h4 id="需要提前下载好数据集"><a href="#需要提前下载好数据集" class="headerlink" title="需要提前下载好数据集"></a>需要提前下载好数据集</h4><p>【注意】如果你只是在天池技术圈看到本文，你需要先查看<a target="_blank" rel="noopener" href="https://tianchi.aliyun.com/competition/entrance/531837/tab/227">赛事指南</a>。<br></br>通过<a target="_blank" rel="noopener" href="https://tianchi.aliyun.com/competition/entrance/531837/tab/227">赛事指南</a>提示操作你可以成功<code>Fork</code>赛事论坛的baseline到你的天池实验室，并点击<code>编辑</code>按钮成功跳转到了DSW在线编程。<br></br>在进行数据处理前，你需要点击DSW左侧<code>天池</code>tab，下载本案例数据集<code>2020_US_President_political_contributions</code>，后续步骤才能正确执行。<br></br><br><img src="https://img.alicdn.com/tfs/TB1lceDl5pE_u4jSZKbXXbCUVXa-969-466.png"></p>
<h3 id="数据处理"><a href="#数据处理" class="headerlink" title="数据处理"></a>数据处理</h3><p>进行数据处理前，我们需要知道我们最终想要的数据是什么样的，因为我们是想分析候选人与捐赠人之间的关系，所以我们想要一张数据表中有捐赠人与候选人一一对应的关系，所以需要将目前的三张数据表进行一一关联，汇总到需要的数据。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入相关处理包</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读取候选人信息，由于原始数据没有表头，需要添加表头</span></span><br><span class="line">candidates = pd.read_csv(<span class="string">&quot;weball20.txt&quot;</span>, sep = <span class="string">&#x27;|&#x27;</span>,names=[<span class="string">&#x27;CAND_ID&#x27;</span>,<span class="string">&#x27;CAND_NAME&#x27;</span>,<span class="string">&#x27;CAND_ICI&#x27;</span>,<span class="string">&#x27;PTY_CD&#x27;</span>,<span class="string">&#x27;CAND_PTY_AFFILIATION&#x27;</span>,<span class="string">&#x27;TTL_RECEIPTS&#x27;</span>,</span><br><span class="line">                                                          <span class="string">&#x27;TRANS_FROM_AUTH&#x27;</span>,<span class="string">&#x27;TTL_DISB&#x27;</span>,<span class="string">&#x27;TRANS_TO_AUTH&#x27;</span>,<span class="string">&#x27;COH_BOP&#x27;</span>,<span class="string">&#x27;COH_COP&#x27;</span>,<span class="string">&#x27;CAND_CONTRIB&#x27;</span>,</span><br><span class="line">                                                          <span class="string">&#x27;CAND_LOANS&#x27;</span>,<span class="string">&#x27;OTHER_LOANS&#x27;</span>,<span class="string">&#x27;CAND_LOAN_REPAY&#x27;</span>,<span class="string">&#x27;OTHER_LOAN_REPAY&#x27;</span>,<span class="string">&#x27;DEBTS_OWED_BY&#x27;</span>,</span><br><span class="line">                                                          <span class="string">&#x27;TTL_INDIV_CONTRIB&#x27;</span>,<span class="string">&#x27;CAND_OFFICE_ST&#x27;</span>,<span class="string">&#x27;CAND_OFFICE_DISTRICT&#x27;</span>,<span class="string">&#x27;SPEC_ELECTION&#x27;</span>,<span class="string">&#x27;PRIM_ELECTION&#x27;</span>,<span class="string">&#x27;RUN_ELECTION&#x27;</span></span><br><span class="line">                                                          ,<span class="string">&#x27;GEN_ELECTION&#x27;</span>,<span class="string">&#x27;GEN_ELECTION_PRECENT&#x27;</span>,<span class="string">&#x27;OTHER_POL_CMTE_CONTRIB&#x27;</span>,<span class="string">&#x27;POL_PTY_CONTRIB&#x27;</span>,</span><br><span class="line">                                                          <span class="string">&#x27;CVG_END_DT&#x27;</span>,<span class="string">&#x27;INDIV_REFUNDS&#x27;</span>,<span class="string">&#x27;CMTE_REFUNDS&#x27;</span>])</span><br><span class="line"><span class="comment"># 读取候选人和委员会的联系信息</span></span><br><span class="line">ccl = pd.read_csv(<span class="string">&quot;ccl.txt&quot;</span>, sep = <span class="string">&#x27;|&#x27;</span>,names=[<span class="string">&#x27;CAND_ID&#x27;</span>,<span class="string">&#x27;CAND_ELECTION_YR&#x27;</span>,<span class="string">&#x27;FEC_ELECTION_YR&#x27;</span>,<span class="string">&#x27;CMTE_ID&#x27;</span>,<span class="string">&#x27;CMTE_TP&#x27;</span>,<span class="string">&#x27;CMTE_DSGN&#x27;</span>,<span class="string">&#x27;LINKAGE_ID&#x27;</span>])</span><br><span class="line"><span class="comment"># 读取个人捐赠数据，由于原始数据没有表头，需要添加表头</span></span><br><span class="line"><span class="comment"># 提示：读取本文件大概需要5-10s</span></span><br><span class="line">itcont = pd.read_csv(<span class="string">&#x27;itcont_2020_20200722_20200820.txt&#x27;</span>, sep=<span class="string">&#x27;|&#x27;</span>,names=[<span class="string">&#x27;CMTE_ID&#x27;</span>,<span class="string">&#x27;AMNDT_IND&#x27;</span>,<span class="string">&#x27;RPT_TP&#x27;</span>,<span class="string">&#x27;TRANSACTION_PGI&#x27;</span>,</span><br><span class="line">                                                                                  <span class="string">&#x27;IMAGE_NUM&#x27;</span>,<span class="string">&#x27;TRANSACTION_TP&#x27;</span>,<span class="string">&#x27;ENTITY_TP&#x27;</span>,<span class="string">&#x27;NAME&#x27;</span>,<span class="string">&#x27;CITY&#x27;</span>,</span><br><span class="line">                                                                                  <span class="string">&#x27;STATE&#x27;</span>,<span class="string">&#x27;ZIP_CODE&#x27;</span>,<span class="string">&#x27;EMPLOYER&#x27;</span>,<span class="string">&#x27;OCCUPATION&#x27;</span>,<span class="string">&#x27;TRANSACTION_DT&#x27;</span>,</span><br><span class="line">                                                                                  <span class="string">&#x27;TRANSACTION_AMT&#x27;</span>,<span class="string">&#x27;OTHER_ID&#x27;</span>,<span class="string">&#x27;TRAN_ID&#x27;</span>,<span class="string">&#x27;FILE_NUM&#x27;</span>,<span class="string">&#x27;MEMO_CD&#x27;</span>,</span><br><span class="line">                                                                                  <span class="string">&#x27;MEMO_TEXT&#x27;</span>,<span class="string">&#x27;SUB_ID&#x27;</span>])</span><br></pre></td></tr></table></figure>

<pre><code>/var/folders/z4/ghsf3khj15d_3g4_v2t86_f00000gn/T/ipykernel_48460/3834039584.py:12: DtypeWarning: Columns (10,15,16,18) have mixed types. Specify dtype option on import or set low_memory=False.
  itcont = pd.read_csv(&#39;itcont_2020_20200722_20200820.txt&#39;, sep=&#39;|&#39;,names=[&#39;CMTE_ID&#39;,&#39;AMNDT_IND&#39;,&#39;RPT_TP&#39;,&#39;TRANSACTION_PGI&#39;,
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 候选人数据预览</span></span><br><span class="line">candidates.info()</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 3982 entries, 0 to 3981
Data columns (total 30 columns):
 #   Column                  Non-Null Count  Dtype  
---  ------                  --------------  -----  
 0   CAND_ID                 3982 non-null   object 
 1   CAND_NAME               3982 non-null   object 
 2   CAND_ICI                3904 non-null   object 
 3   PTY_CD                  3982 non-null   int64  
 4   CAND_PTY_AFFILIATION    3981 non-null   object 
 5   TTL_RECEIPTS            3982 non-null   float64
 6   TRANS_FROM_AUTH         3982 non-null   float64
 7   TTL_DISB                3982 non-null   float64
 8   TRANS_TO_AUTH           3982 non-null   float64
 9   COH_BOP                 3982 non-null   float64
 10  COH_COP                 3982 non-null   float64
 11  CAND_CONTRIB            3982 non-null   float64
 12  CAND_LOANS              3982 non-null   float64
 13  OTHER_LOANS             3982 non-null   float64
 14  CAND_LOAN_REPAY         3982 non-null   float64
 15  OTHER_LOAN_REPAY        3982 non-null   float64
 16  DEBTS_OWED_BY           3982 non-null   float64
 17  TTL_INDIV_CONTRIB       3982 non-null   float64
 18  CAND_OFFICE_ST          3982 non-null   object 
 19  CAND_OFFICE_DISTRICT    3982 non-null   int64  
 20  SPEC_ELECTION           0 non-null      float64
 21  PRIM_ELECTION           0 non-null      float64
 22  RUN_ELECTION            0 non-null      float64
 23  GEN_ELECTION            0 non-null      float64
 24  GEN_ELECTION_PRECENT    0 non-null      float64
 25  OTHER_POL_CMTE_CONTRIB  3982 non-null   float64
 26  POL_PTY_CONTRIB         3982 non-null   float64
 27  CVG_END_DT              3982 non-null   object 
 28  INDIV_REFUNDS           3982 non-null   float64
 29  CMTE_REFUNDS            3982 non-null   float64
dtypes: float64(22), int64(2), object(6)
memory usage: 933.4+ KB
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">candidates.describe()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PTY_CD</th>
      <th>TTL_RECEIPTS</th>
      <th>TRANS_FROM_AUTH</th>
      <th>TTL_DISB</th>
      <th>TRANS_TO_AUTH</th>
      <th>COH_BOP</th>
      <th>COH_COP</th>
      <th>CAND_CONTRIB</th>
      <th>CAND_LOANS</th>
      <th>OTHER_LOANS</th>
      <th>...</th>
      <th>CAND_OFFICE_DISTRICT</th>
      <th>SPEC_ELECTION</th>
      <th>PRIM_ELECTION</th>
      <th>RUN_ELECTION</th>
      <th>GEN_ELECTION</th>
      <th>GEN_ELECTION_PRECENT</th>
      <th>OTHER_POL_CMTE_CONTRIB</th>
      <th>POL_PTY_CONTRIB</th>
      <th>INDIV_REFUNDS</th>
      <th>CMTE_REFUNDS</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>3982.000000</td>
      <td>3.982000e+03</td>
      <td>3.982000e+03</td>
      <td>3.982000e+03</td>
      <td>3.982000e+03</td>
      <td>3.982000e+03</td>
      <td>3.982000e+03</td>
      <td>3.982000e+03</td>
      <td>3.982000e+03</td>
      <td>3.982000e+03</td>
      <td>...</td>
      <td>3982.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3.982000e+03</td>
      <td>3.982000e+03</td>
      <td>3.982000e+03</td>
      <td>3982.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>1.653943</td>
      <td>3.490027e+06</td>
      <td>1.991258e+05</td>
      <td>3.181663e+06</td>
      <td>2.156232e+04</td>
      <td>1.609336e+05</td>
      <td>2.695845e+06</td>
      <td>1.110336e+06</td>
      <td>8.445414e+04</td>
      <td>3.219767e+03</td>
      <td>...</td>
      <td>8.349824</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>6.139755e+05</td>
      <td>1.773010e+03</td>
      <td>5.106747e+05</td>
      <td>1287.255580</td>
    </tr>
    <tr>
      <th>std</th>
      <td>0.641669</td>
      <td>8.232322e+07</td>
      <td>5.848473e+06</td>
      <td>6.819119e+07</td>
      <td>3.260525e+05</td>
      <td>9.854338e+05</td>
      <td>1.546208e+08</td>
      <td>4.837297e+07</td>
      <td>1.151892e+06</td>
      <td>1.280533e+05</td>
      <td>...</td>
      <td>10.602281</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>3.048211e+07</td>
      <td>4.936670e+04</td>
      <td>3.048332e+07</td>
      <td>8523.411822</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.000000</td>
      <td>-6.741325e+05</td>
      <td>0.000000e+00</td>
      <td>-6.741575e+05</td>
      <td>0.000000e+00</td>
      <td>-2.167346e+04</td>
      <td>-3.807660e+05</td>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>...</td>
      <td>0.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>-3.741000e+04</td>
      <td>-20400.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>1.000000</td>
      <td>2.500000e+02</td>
      <td>0.000000e+00</td>
      <td>1.850122e+03</td>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>...</td>
      <td>1.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>2.000000</td>
      <td>2.288796e+04</td>
      <td>0.000000e+00</td>
      <td>2.854883e+04</td>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>3.917100e+02</td>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>...</td>
      <td>5.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>2.000000</td>
      <td>4.180395e+05</td>
      <td>0.000000e+00</td>
      <td>4.037414e+05</td>
      <td>0.000000e+00</td>
      <td>7.673805e+03</td>
      <td>1.577177e+04</td>
      <td>1.317500e+02</td>
      <td>2.500000e+02</td>
      <td>0.000000e+00</td>
      <td>...</td>
      <td>11.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>6.775000e+03</td>
      <td>0.000000e+00</td>
      <td>3.000000e+03</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>3.000000</td>
      <td>4.824618e+09</td>
      <td>2.751765e+08</td>
      <td>3.848951e+09</td>
      <td>1.041500e+07</td>
      <td>3.000000e+07</td>
      <td>9.756669e+09</td>
      <td>2.831281e+09</td>
      <td>5.001902e+07</td>
      <td>7.300000e+06</td>
      <td>...</td>
      <td>53.000000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.923500e+09</td>
      <td>3.100000e+06</td>
      <td>1.923500e+09</td>
      <td>224100.000000</td>
    </tr>
  </tbody>
</table>
<p>8 rows × 24 columns</p>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">candidates.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CAND_ID</th>
      <th>CAND_NAME</th>
      <th>CAND_ICI</th>
      <th>PTY_CD</th>
      <th>CAND_PTY_AFFILIATION</th>
      <th>TTL_RECEIPTS</th>
      <th>TRANS_FROM_AUTH</th>
      <th>TTL_DISB</th>
      <th>TRANS_TO_AUTH</th>
      <th>COH_BOP</th>
      <th>...</th>
      <th>SPEC_ELECTION</th>
      <th>PRIM_ELECTION</th>
      <th>RUN_ELECTION</th>
      <th>GEN_ELECTION</th>
      <th>GEN_ELECTION_PRECENT</th>
      <th>OTHER_POL_CMTE_CONTRIB</th>
      <th>POL_PTY_CONTRIB</th>
      <th>CVG_END_DT</th>
      <th>INDIV_REFUNDS</th>
      <th>CMTE_REFUNDS</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>H8AK00132</td>
      <td>SHEIN, DIMITRI</td>
      <td>C</td>
      <td>1</td>
      <td>DEM</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>367.52</td>
      <td>0.0</td>
      <td>367.52</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>09/30/2019</td>
      <td>0.00</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>H6AK00045</td>
      <td>YOUNG, DONALD E</td>
      <td>I</td>
      <td>2</td>
      <td>REP</td>
      <td>1950289.86</td>
      <td>138304.94</td>
      <td>1817836.79</td>
      <td>0.0</td>
      <td>116720.12</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>839094.63</td>
      <td>500.0</td>
      <td>12/31/2020</td>
      <td>19609.67</td>
      <td>5500.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>H8AK01031</td>
      <td>NELSON, THOMAS JOHN</td>
      <td>C</td>
      <td>2</td>
      <td>REP</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>466.51</td>
      <td>0.0</td>
      <td>466.51</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>03/31/2019</td>
      <td>0.00</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>H8AK00140</td>
      <td>GALVIN, ALYSE</td>
      <td>C</td>
      <td>3</td>
      <td>IND</td>
      <td>5253251.54</td>
      <td>60024.76</td>
      <td>5162902.93</td>
      <td>0.0</td>
      <td>6245.09</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>340486.99</td>
      <td>10025.0</td>
      <td>12/31/2020</td>
      <td>32594.02</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>H0AL01097</td>
      <td>AVERHART, JAMES</td>
      <td>O</td>
      <td>1</td>
      <td>DEM</td>
      <td>80094.95</td>
      <td>0.00</td>
      <td>78973.24</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>12/31/2020</td>
      <td>0.00</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 30 columns</p>
</div>



<p>选取所需要的候选人信息<br>数据字段说明：</p>
<ul>
<li>CAND_ID：候选人ID</li>
<li>CAND_NAME：候选人姓名</li>
<li>CAND_PTY_AFFILIATION：候选人党派</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">candidates = pd.DataFrame(candidates,columns=[<span class="string">&#x27;CAND_ID&#x27;</span>,<span class="string">&#x27;CAND_NAME&#x27;</span>,<span class="string">&#x27;CAND_PTY_AFFILIATION&#x27;</span>])</span><br><span class="line">candidates.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CAND_ID</th>
      <th>CAND_NAME</th>
      <th>CAND_PTY_AFFILIATION</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>H8AK00132</td>
      <td>SHEIN, DIMITRI</td>
      <td>DEM</td>
    </tr>
    <tr>
      <th>1</th>
      <td>H6AK00045</td>
      <td>YOUNG, DONALD E</td>
      <td>REP</td>
    </tr>
    <tr>
      <th>2</th>
      <td>H8AK01031</td>
      <td>NELSON, THOMAS JOHN</td>
      <td>REP</td>
    </tr>
    <tr>
      <th>3</th>
      <td>H8AK00140</td>
      <td>GALVIN, ALYSE</td>
      <td>IND</td>
    </tr>
    <tr>
      <th>4</th>
      <td>H0AL01097</td>
      <td>AVERHART, JAMES</td>
      <td>DEM</td>
    </tr>
  </tbody>
</table>
</div>



<h4 id="将委员会和候选人一一对应，通过CAND-ID关联两个表"><a href="#将委员会和候选人一一对应，通过CAND-ID关联两个表" class="headerlink" title="将委员会和候选人一一对应，通过CAND_ID关联两个表"></a>将委员会和候选人一一对应，通过<code>CAND_ID</code>关联两个表</h4><p>由于候选人和委员会的联系表中无候选人姓名，只有候选人ID（<code>CAND_ID</code>），所以需要通过<code>CAND_ID</code>从候选人表中获取到候选人姓名，最终得到候选人与委员会联系表<code>ccl</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ccl.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CAND_ID</th>
      <th>CAND_ELECTION_YR</th>
      <th>FEC_ELECTION_YR</th>
      <th>CMTE_ID</th>
      <th>CMTE_TP</th>
      <th>CMTE_DSGN</th>
      <th>LINKAGE_ID</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>C00713602</td>
      <td>2019</td>
      <td>2020</td>
      <td>C00712851</td>
      <td>O</td>
      <td>U</td>
      <td>228963</td>
    </tr>
    <tr>
      <th>1</th>
      <td>H0AK00105</td>
      <td>2020</td>
      <td>2020</td>
      <td>C00607515</td>
      <td>H</td>
      <td>P</td>
      <td>229250</td>
    </tr>
    <tr>
      <th>2</th>
      <td>H0AL01055</td>
      <td>2020</td>
      <td>2020</td>
      <td>C00697789</td>
      <td>H</td>
      <td>P</td>
      <td>226125</td>
    </tr>
    <tr>
      <th>3</th>
      <td>H0AL01063</td>
      <td>2020</td>
      <td>2020</td>
      <td>C00701557</td>
      <td>H</td>
      <td>P</td>
      <td>227053</td>
    </tr>
    <tr>
      <th>4</th>
      <td>H0AL01071</td>
      <td>2020</td>
      <td>2020</td>
      <td>C00701409</td>
      <td>H</td>
      <td>P</td>
      <td>227054</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ccl.info()</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 7061 entries, 0 to 7060
Data columns (total 7 columns):
 #   Column            Non-Null Count  Dtype 
---  ------            --------------  ----- 
 0   CAND_ID           7061 non-null   object
 1   CAND_ELECTION_YR  7061 non-null   int64 
 2   FEC_ELECTION_YR   7061 non-null   int64 
 3   CMTE_ID           7061 non-null   object
 4   CMTE_TP           7061 non-null   object
 5   CMTE_DSGN         7061 non-null   object
 6   LINKAGE_ID        7061 non-null   int64 
dtypes: int64(3), object(4)
memory usage: 386.3+ KB
</code></pre>
<p>选取所需要委员会的信息 数据字段说明：</p>
<ul>
<li>CAND_ID 候选人ID</li>
<li>CAND_ELECTION_YR 候选人选举年份</li>
<li>CMTE_ID 委员会ID</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ccl = pd.DataFrame(ccl,columns=[<span class="string">&#x27;CAND_ID&#x27;</span>,<span class="string">&#x27;CAND_ELECTION_YR&#x27;</span>,<span class="string">&#x27;CMTE_ID&#x27;</span>])</span><br><span class="line">ccl.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CAND_ID</th>
      <th>CAND_ELECTION_YR</th>
      <th>CMTE_ID</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>C00713602</td>
      <td>2019</td>
      <td>C00712851</td>
    </tr>
    <tr>
      <th>1</th>
      <td>H0AK00105</td>
      <td>2020</td>
      <td>C00607515</td>
    </tr>
    <tr>
      <th>2</th>
      <td>H0AL01055</td>
      <td>2020</td>
      <td>C00697789</td>
    </tr>
    <tr>
      <th>3</th>
      <td>H0AL01063</td>
      <td>2020</td>
      <td>C00701557</td>
    </tr>
    <tr>
      <th>4</th>
      <td>H0AL01071</td>
      <td>2020</td>
      <td>C00701409</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ccl.shape,candidates.shape</span><br></pre></td></tr></table></figure>




<pre><code>((7061, 3), (3982, 3))
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 关联两个表数据</span></span><br><span class="line">ccl = pd.merge(ccl,candidates,on=[<span class="string">&#x27;CAND_ID&#x27;</span>])</span><br><span class="line">ccl</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CAND_ID</th>
      <th>CAND_ELECTION_YR</th>
      <th>CMTE_ID</th>
      <th>CAND_NAME</th>
      <th>CAND_PTY_AFFILIATION</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>H0AL01055</td>
      <td>2020</td>
      <td>C00697789</td>
      <td>CARL, JERRY LEE, JR</td>
      <td>REP</td>
    </tr>
    <tr>
      <th>1</th>
      <td>H0AL01063</td>
      <td>2020</td>
      <td>C00701557</td>
      <td>LAMBERT, DOUGLAS WESTLEY III</td>
      <td>REP</td>
    </tr>
    <tr>
      <th>2</th>
      <td>H0AL01071</td>
      <td>2020</td>
      <td>C00701409</td>
      <td>PRINGLE, CHRISTOPHER PAUL</td>
      <td>REP</td>
    </tr>
    <tr>
      <th>3</th>
      <td>H0AL01089</td>
      <td>2020</td>
      <td>C00703066</td>
      <td>HIGHTOWER, BILL</td>
      <td>REP</td>
    </tr>
    <tr>
      <th>4</th>
      <td>H0AL01097</td>
      <td>2020</td>
      <td>C00708867</td>
      <td>AVERHART, JAMES</td>
      <td>DEM</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>4423</th>
      <td>S8WV00143</td>
      <td>2018</td>
      <td>C00681163</td>
      <td>MORRISEY, PATRICK MR</td>
      <td>REP</td>
    </tr>
    <tr>
      <th>4424</th>
      <td>S8WV00143</td>
      <td>2018</td>
      <td>C00651075</td>
      <td>MORRISEY, PATRICK MR</td>
      <td>REP</td>
    </tr>
    <tr>
      <th>4425</th>
      <td>S8WV00143</td>
      <td>2018</td>
      <td>C00689471</td>
      <td>MORRISEY, PATRICK MR</td>
      <td>REP</td>
    </tr>
    <tr>
      <th>4426</th>
      <td>S8WV00143</td>
      <td>2018</td>
      <td>C00710889</td>
      <td>MORRISEY, PATRICK MR</td>
      <td>REP</td>
    </tr>
    <tr>
      <th>4427</th>
      <td>S8WV00143</td>
      <td>2018</td>
      <td>C00417063</td>
      <td>MORRISEY, PATRICK MR</td>
      <td>REP</td>
    </tr>
  </tbody>
</table>
<p>4428 rows × 5 columns</p>
</div>



<p>ccl数据字段说明：</p>
<ul>
<li>CAND_ID 候选人ID</li>
<li>CAND_ELECTION_YR 候选人选举年份</li>
<li>CMTE_ID 委员会ID</li>
<li>CAND_NAME：候选人姓名</li>
<li>CAND_PTY_AFFILIATION：候选人党派</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ccl.shape</span><br></pre></td></tr></table></figure>




<pre><code>(4428, 5)
</code></pre>
<h4 id="将候选人和捐赠人一一对应，通过CMTE-ID关联两个表"><a href="#将候选人和捐赠人一一对应，通过CMTE-ID关联两个表" class="headerlink" title="将候选人和捐赠人一一对应，通过CMTE_ID关联两个表"></a>将候选人和捐赠人一一对应，通过<code>CMTE_ID</code>关联两个表</h4><p>通过<code>CMTE_ID</code>将目前处理好的候选人和委员会关系表与人捐款档案表进行关联，得到候选人与捐赠人一一对应联系表<code>cil</code>。</p>
<p>捐款档案表所需字段</p>
<ul>
<li>CMTE_ID  委员会ID</li>
<li>NAME 捐款人姓名</li>
<li>CITY 捐款人所在市</li>
<li>STATE 捐款人所在州</li>
<li>EMPLOYER 捐款人雇主&#x2F;公司</li>
<li>OCCUPATION 捐款人职业</li>
<li>TRANSACTION_AMT – 捐赠数额（美元）</li>
<li>TRANSACTION_DT – 收到捐款的日期</li>
<li>CAND_PTY_AFFILIATION – 候选人党派</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">itcont = pd.DataFrame(itcont,columns=[<span class="string">&#x27;CMTE_ID&#x27;</span>,<span class="string">&#x27;NAME&#x27;</span>,<span class="string">&#x27;CITY&#x27;</span>,<span class="string">&#x27;STATE&#x27;</span>,<span class="string">&#x27;EMPLOYER&#x27;</span>,<span class="string">&#x27;OCCUPATION&#x27;</span>,<span class="string">&#x27;TRANSACTION_AMT&#x27;</span>, <span class="string">&#x27;TRANSACTION_DT&#x27;</span>])</span><br><span class="line">itcont.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CMTE_ID</th>
      <th>NAME</th>
      <th>CITY</th>
      <th>STATE</th>
      <th>EMPLOYER</th>
      <th>OCCUPATION</th>
      <th>TRANSACTION_AMT</th>
      <th>TRANSACTION_DT</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>C00701888</td>
      <td>BAUMGART, STEPHEN</td>
      <td>LOS GATOS</td>
      <td>CA</td>
      <td>VARIAN MEDICAL SYSTEMS</td>
      <td>SYSTEMS ENGINEER PHYSICIST</td>
      <td>500</td>
      <td>7222020</td>
    </tr>
    <tr>
      <th>1</th>
      <td>C00701888</td>
      <td>HELBERG, JACOB</td>
      <td>SAN FRANCISCO</td>
      <td>CA</td>
      <td>STANFORD CYBER POLICY CENTER</td>
      <td>SENIOR ADVISOR</td>
      <td>250000</td>
      <td>7232020</td>
    </tr>
    <tr>
      <th>2</th>
      <td>C00701888</td>
      <td>CONSIGLI, ANTHONY</td>
      <td>MILFORD</td>
      <td>MA</td>
      <td>WHITEWOOD VENTURES, LLC</td>
      <td>CHIEF EXECUTIVE OFFICER</td>
      <td>25000</td>
      <td>7312020</td>
    </tr>
    <tr>
      <th>3</th>
      <td>C00701888</td>
      <td>POTASH, ANDREW</td>
      <td>MAMARONECK</td>
      <td>NY</td>
      <td>DISTINGUISHED PROGRAMS INSURANCE</td>
      <td>CHIEF EXECUTIVE OFFICER</td>
      <td>100000</td>
      <td>7282020</td>
    </tr>
    <tr>
      <th>4</th>
      <td>C00701888</td>
      <td>WEINER, STEPHEN R.</td>
      <td>BOSTON</td>
      <td>MA</td>
      <td>S.R. WEINER AND ASSOCIATES</td>
      <td>DEVELOPER</td>
      <td>25000</td>
      <td>7282020</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ccl.shape,itcont.shape</span><br></pre></td></tr></table></figure>




<pre><code>((4428, 5), (1955607, 8))
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看目前数据前10行</span></span><br><span class="line">c_itcont = pd.merge(ccl,itcont)</span><br><span class="line">c_itcont.head()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CAND_ID</th>
      <th>CAND_ELECTION_YR</th>
      <th>CMTE_ID</th>
      <th>CAND_NAME</th>
      <th>CAND_PTY_AFFILIATION</th>
      <th>NAME</th>
      <th>CITY</th>
      <th>STATE</th>
      <th>EMPLOYER</th>
      <th>OCCUPATION</th>
      <th>TRANSACTION_AMT</th>
      <th>TRANSACTION_DT</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>H0AZ02182</td>
      <td>2020</td>
      <td>C00698084</td>
      <td>MORGAN, JOSEPH DAVID</td>
      <td>REP</td>
      <td>MARTIN, WILLIAM II</td>
      <td>TUCSON</td>
      <td>AZ</td>
      <td>RETIRED</td>
      <td>RETIRED</td>
      <td>100</td>
      <td>7242020</td>
    </tr>
    <tr>
      <th>1</th>
      <td>H0AZ02182</td>
      <td>2020</td>
      <td>C00698084</td>
      <td>MORGAN, JOSEPH DAVID</td>
      <td>REP</td>
      <td>RODRIGUEZ, GERARDO</td>
      <td>TUCSON</td>
      <td>AZ</td>
      <td>VA HOSPITAL</td>
      <td>LAB TECH</td>
      <td>40</td>
      <td>7242020</td>
    </tr>
    <tr>
      <th>2</th>
      <td>H0AZ02182</td>
      <td>2020</td>
      <td>C00698084</td>
      <td>MORGAN, JOSEPH DAVID</td>
      <td>REP</td>
      <td>RODRIGUEZ, GERARDO</td>
      <td>TUCSON</td>
      <td>AZ</td>
      <td>VA HOSPITAL</td>
      <td>LAB TECH</td>
      <td>40</td>
      <td>7312020</td>
    </tr>
    <tr>
      <th>3</th>
      <td>H0AZ03461</td>
      <td>2020</td>
      <td>C00725697</td>
      <td>WOOD, DANIEL</td>
      <td>REP</td>
      <td>HOPKINS, RICHARD</td>
      <td>BUCKEYE</td>
      <td>AZ</td>
      <td>POWERS-LEAVITT</td>
      <td>INSURANCE AGENT</td>
      <td>300</td>
      <td>8102020</td>
    </tr>
    <tr>
      <th>4</th>
      <td>H0AZ03461</td>
      <td>2020</td>
      <td>C00725697</td>
      <td>WOOD, DANIEL</td>
      <td>REP</td>
      <td>PENDLETON, DIANE</td>
      <td>SCOTTSDALE</td>
      <td>AZ</td>
      <td>UNEMPLOYED</td>
      <td>NaN</td>
      <td>500</td>
      <td>8072020</td>
    </tr>
  </tbody>
</table>
</div>



<p>c_itcont表字段</p>
<ul>
<li>CAND_ID 候选人ID</li>
<li>CAND_ELECTION_YR 候选人选举年份</li>
<li>CMTE_ID 委员会ID</li>
<li>CAND_NAME：候选人姓名</li>
<li>CAND_PTY_AFFILIATION – 候选人党派</li>
<li>NAME 捐款人姓名</li>
<li>CITY 捐款人所在市</li>
<li>State 捐款人所在州</li>
<li>EMPLOYER 捐款人雇主&#x2F;公司</li>
<li>OCCUPATION 捐款人职业</li>
<li>TRANSACTION_AMT – 捐赠数额（美元）</li>
<li>TRANSACTION_DT – 收到捐款的日期</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c_itcont.shape</span><br></pre></td></tr></table></figure>




<pre><code>(674164, 12)
</code></pre>
<h3 id="数据探索与清洗"><a href="#数据探索与清洗" class="headerlink" title="数据探索与清洗"></a>数据探索与清洗</h3><p>进过数据处理部分，我们获得了可用的数据集，现在我们可以利用调用<code>shape</code>属性查看数据的规模，调用<code>info</code>函数查看数据信息，调用<code>describe</code>函数查看数据分布。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看数据规模 多少行 多少列</span></span><br><span class="line">c_itcont.shape</span><br></pre></td></tr></table></figure>




<pre><code>(674164, 12)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c_itcont.info()</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
Int64Index: 674164 entries, 0 to 674163
Data columns (total 12 columns):
 #   Column                Non-Null Count   Dtype 
---  ------                --------------   ----- 
 0   CAND_ID               674164 non-null  object
 1   CAND_ELECTION_YR      674164 non-null  int64 
 2   CMTE_ID               674164 non-null  object
 3   CAND_NAME             674164 non-null  object
 4   CAND_PTY_AFFILIATION  674164 non-null  object
 5   NAME                  674164 non-null  object
 6   CITY                  674131 non-null  object
 7   STATE                 674130 non-null  object
 8   EMPLOYER              657649 non-null  object
 9   OCCUPATION            661433 non-null  object
 10  TRANSACTION_AMT       674164 non-null  int64 
 11  TRANSACTION_DT        674164 non-null  int64 
dtypes: int64(3), object(9)
memory usage: 66.9+ MB
</code></pre>
<p>通过上面的探索我们知道目前数据集的一些基本情况，目前数据总共有674164行，12列，总占用内存66.9+ MB，<code>STATE</code>、<code>EMPLOYER</code>、<code>OCCUPATION</code>有缺失值，另外日期列目前为int64类型，需要进行转换为str类型。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对缺失值填充</span></span><br><span class="line">c_itcont[<span class="string">&#x27;CITY&#x27;</span>].fillna(<span class="string">&#x27;NOT PROVIDED&#x27;</span>,inplace=<span class="literal">True</span>)</span><br><span class="line">c_itcont[<span class="string">&#x27;STATE&#x27;</span>].fillna(<span class="string">&#x27;NOT PROVIDED&#x27;</span>,inplace=<span class="literal">True</span>)</span><br><span class="line">c_itcont[<span class="string">&#x27;EMPLOYER&#x27;</span>].fillna(<span class="string">&#x27;NOT PROVIDED&#x27;</span>,inplace=<span class="literal">True</span>)</span><br><span class="line">c_itcont[<span class="string">&#x27;OCCUPATION&#x27;</span>].fillna(<span class="string">&#x27;NOT PROVIDED&#x27;</span>,inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 格式转换</span></span><br><span class="line">c_itcont[<span class="string">&#x27;CAND_ELECTION_YR&#x27;</span>] = c_itcont[<span class="string">&#x27;CAND_ELECTION_YR&#x27;</span>].astype(<span class="built_in">str</span>)</span><br><span class="line">c_itcont[<span class="string">&#x27;TRANSACTION_DT&#x27;</span>] = c_itcont[<span class="string">&#x27;TRANSACTION_DT&#x27;</span>].astype(<span class="built_in">str</span>)</span><br><span class="line"><span class="comment"># 日期格式改为年月日</span></span><br><span class="line">c_itcont[<span class="string">&#x27;TRANSACTION_DT&#x27;</span>] = [i[<span class="number">3</span>:]+i[:<span class="number">3</span>] <span class="keyword">for</span> i <span class="keyword">in</span> c_itcont[<span class="string">&#x27;TRANSACTION_DT&#x27;</span>]]</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c_itcont.head(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CAND_ID</th>
      <th>CAND_ELECTION_YR</th>
      <th>CMTE_ID</th>
      <th>CAND_NAME</th>
      <th>CAND_PTY_AFFILIATION</th>
      <th>NAME</th>
      <th>CITY</th>
      <th>STATE</th>
      <th>EMPLOYER</th>
      <th>OCCUPATION</th>
      <th>TRANSACTION_AMT</th>
      <th>TRANSACTION_DT</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>H0AZ02182</td>
      <td>2020</td>
      <td>C00698084</td>
      <td>MORGAN, JOSEPH DAVID</td>
      <td>REP</td>
      <td>MARTIN, WILLIAM II</td>
      <td>TUCSON</td>
      <td>AZ</td>
      <td>RETIRED</td>
      <td>RETIRED</td>
      <td>100</td>
      <td>2020724</td>
    </tr>
    <tr>
      <th>1</th>
      <td>H0AZ02182</td>
      <td>2020</td>
      <td>C00698084</td>
      <td>MORGAN, JOSEPH DAVID</td>
      <td>REP</td>
      <td>RODRIGUEZ, GERARDO</td>
      <td>TUCSON</td>
      <td>AZ</td>
      <td>VA HOSPITAL</td>
      <td>LAB TECH</td>
      <td>40</td>
      <td>2020724</td>
    </tr>
    <tr>
      <th>2</th>
      <td>H0AZ02182</td>
      <td>2020</td>
      <td>C00698084</td>
      <td>MORGAN, JOSEPH DAVID</td>
      <td>REP</td>
      <td>RODRIGUEZ, GERARDO</td>
      <td>TUCSON</td>
      <td>AZ</td>
      <td>VA HOSPITAL</td>
      <td>LAB TECH</td>
      <td>40</td>
      <td>2020731</td>
    </tr>
    <tr>
      <th>3</th>
      <td>H0AZ03461</td>
      <td>2020</td>
      <td>C00725697</td>
      <td>WOOD, DANIEL</td>
      <td>REP</td>
      <td>HOPKINS, RICHARD</td>
      <td>BUCKEYE</td>
      <td>AZ</td>
      <td>POWERS-LEAVITT</td>
      <td>INSURANCE AGENT</td>
      <td>300</td>
      <td>2020810</td>
    </tr>
    <tr>
      <th>4</th>
      <td>H0AZ03461</td>
      <td>2020</td>
      <td>C00725697</td>
      <td>WOOD, DANIEL</td>
      <td>REP</td>
      <td>PENDLETON, DIANE</td>
      <td>SCOTTSDALE</td>
      <td>AZ</td>
      <td>UNEMPLOYED</td>
      <td>NOT PROVIDED</td>
      <td>500</td>
      <td>2020807</td>
    </tr>
    <tr>
      <th>5</th>
      <td>H0AZ03461</td>
      <td>2020</td>
      <td>C00725697</td>
      <td>WOOD, DANIEL</td>
      <td>REP</td>
      <td>PREVATT, WILLIAM</td>
      <td>SCOTTSDALE</td>
      <td>AZ</td>
      <td>SELF-EMPLOYED</td>
      <td>DVM</td>
      <td>500</td>
      <td>2020731</td>
    </tr>
    <tr>
      <th>6</th>
      <td>H0AZ03461</td>
      <td>2020</td>
      <td>C00725697</td>
      <td>WOOD, DANIEL</td>
      <td>REP</td>
      <td>HARDING, DOUG</td>
      <td>TUCSON</td>
      <td>AZ</td>
      <td>MICROSURE</td>
      <td>OPERATIONS MANAGER</td>
      <td>2800</td>
      <td>2020810</td>
    </tr>
    <tr>
      <th>7</th>
      <td>H0AZ03461</td>
      <td>2020</td>
      <td>C00725697</td>
      <td>WOOD, DANIEL</td>
      <td>REP</td>
      <td>HARDING, MARI</td>
      <td>TUCSON</td>
      <td>AZ</td>
      <td>NOT PROVIDED</td>
      <td>NOT PROVIDED</td>
      <td>1400</td>
      <td>2020815</td>
    </tr>
    <tr>
      <th>8</th>
      <td>H0AZ03461</td>
      <td>2020</td>
      <td>C00725697</td>
      <td>WOOD, DANIEL</td>
      <td>REP</td>
      <td>HEDGER, CYNTHIA</td>
      <td>ENNIS</td>
      <td>TX</td>
      <td>NOT PROVIDED</td>
      <td>NOT PROVIDED</td>
      <td>200</td>
      <td>2020731</td>
    </tr>
    <tr>
      <th>9</th>
      <td>H0CA45095</td>
      <td>2020</td>
      <td>C00700807</td>
      <td>HUANG, PEGGY</td>
      <td>REP</td>
      <td>HUANG - PERSONAL FUNDS, PEGGY</td>
      <td>IRVINE</td>
      <td>CA</td>
      <td>OFFICE OF THE ATTORNEY GENERAL</td>
      <td>DEPUTY ATTORNEY GENERAL</td>
      <td>2600</td>
      <td>2020725</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看数据表中数据类型的列的数据分布情况</span></span><br><span class="line">c_itcont.describe()</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>TRANSACTION_AMT</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>6.741640e+05</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>1.584124e+02</td>
    </tr>
    <tr>
      <th>std</th>
      <td>2.440007e+03</td>
    </tr>
    <tr>
      <th>min</th>
      <td>-5.600000e+03</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>2.000000e+01</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>3.500000e+01</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>1.000000e+02</td>
    </tr>
    <tr>
      <th>max</th>
      <td>1.500000e+06</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c_itcont.boxplot(column=[<span class="string">&#x27;TRANSACTION_AMT&#x27;</span>],showmeans=<span class="literal">True</span>,showbox=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;AxesSubplot:&gt;
</code></pre>
<img src="/2022/11/13/%E9%98%BF%E9%87%8C%E4%BA%91AI%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%E7%94%A8Pandas%E6%8F%AD%E7%A7%98%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E7%9A%84%E6%80%BB%E7%BB%9F%E5%96%9C%E5%A5%BD/output_37_1.png" class="">
<h3 id="数据分析"><a href="#数据分析" class="headerlink" title="数据分析"></a>数据分析</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 计算每个党派的所获得的捐款总额，然后排序，取前十位</span></span><br><span class="line">c_itcont.groupby(<span class="string">&quot;CAND_PTY_AFFILIATION&quot;</span>).<span class="built_in">sum</span>().sort_values(<span class="string">&quot;TRANSACTION_AMT&quot;</span>,ascending=<span class="literal">False</span>).head(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>TRANSACTION_AMT</th>
    </tr>
    <tr>
      <th>CAND_PTY_AFFILIATION</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>DEM</th>
      <td>75961780</td>
    </tr>
    <tr>
      <th>REP</th>
      <td>30210416</td>
    </tr>
    <tr>
      <th>IND</th>
      <td>328802</td>
    </tr>
    <tr>
      <th>LIB</th>
      <td>169202</td>
    </tr>
    <tr>
      <th>DFL</th>
      <td>76825</td>
    </tr>
    <tr>
      <th>GRE</th>
      <td>18607</td>
    </tr>
    <tr>
      <th>NON</th>
      <td>11256</td>
    </tr>
    <tr>
      <th>UNK</th>
      <td>10195</td>
    </tr>
    <tr>
      <th>CON</th>
      <td>4117</td>
    </tr>
    <tr>
      <th>BDY</th>
      <td>3250</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 计算每个总统候选人所获得的捐款总额，然后排序，取前十位</span></span><br><span class="line">c_itcont.groupby(<span class="string">&quot;CAND_NAME&quot;</span>).<span class="built_in">sum</span>(<span class="string">&quot;TRANSACTION_AMT&quot;</span>).sort_values(<span class="string">&quot;TRANSACTION_AMT&quot;</span>,ascending=<span class="literal">False</span>).head(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>TRANSACTION_AMT</th>
    </tr>
    <tr>
      <th>CAND_NAME</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>BIDEN, JOSEPH R JR</th>
      <td>68111142</td>
    </tr>
    <tr>
      <th>TRUMP, DONALD J.</th>
      <td>16594982</td>
    </tr>
    <tr>
      <th>SULLIVAN, DAN</th>
      <td>9912465</td>
    </tr>
    <tr>
      <th>BLOOMBERG, MICHAEL R.</th>
      <td>3451916</td>
    </tr>
    <tr>
      <th>MARKEY, EDWARD J. SEN.</th>
      <td>606832</td>
    </tr>
    <tr>
      <th>SHAHEEN, JEANNE</th>
      <td>505446</td>
    </tr>
    <tr>
      <th>KENNEDY, JOSEPH P III</th>
      <td>467738</td>
    </tr>
    <tr>
      <th>CORNYN, JOHN SEN</th>
      <td>345959</td>
    </tr>
    <tr>
      <th>FIGLESTHALER, WILLIAM MATTHEW MD</th>
      <td>258221</td>
    </tr>
    <tr>
      <th>KOBACH, KRIS</th>
      <td>250427</td>
    </tr>
  </tbody>
</table>
</div>



<p>获得捐赠最多的党派有<code>DEM(民主党)</code>、<code>REP(共和党)</code>，分别对应<code>BIDEN, JOSEPH R JR(拜登)</code>和<code>TRUMP, DONALD J.(特朗普)</code>，从我们目前分析的2020.7.22-2020.8.20这一个月的数据来看，在选民的捐赠数据中拜登代表的民主党完胜特朗普代表的共和党，由于完整数据量过大，所以没有对所有数据进行汇总分析，因此也不能确定11月大选公布结果就一定是拜登当选</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看不同职业的人捐款的总额，然后排序，取前十位</span></span><br><span class="line">c_itcont.groupby(<span class="string">&quot;OCCUPATION&quot;</span>).<span class="built_in">sum</span>(<span class="string">&quot;TRANSACTION_AMT&quot;</span>).sort_values(<span class="string">&quot;TRANSACTION_AMT&quot;</span>,ascending=<span class="literal">False</span>).head(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>TRANSACTION_AMT</th>
    </tr>
    <tr>
      <th>OCCUPATION</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>NOT EMPLOYED</th>
      <td>24428910</td>
    </tr>
    <tr>
      <th>RETIRED</th>
      <td>15531441</td>
    </tr>
    <tr>
      <th>NOT PROVIDED</th>
      <td>4653679</td>
    </tr>
    <tr>
      <th>ATTORNEY</th>
      <td>4393670</td>
    </tr>
    <tr>
      <th>FOUNDER</th>
      <td>3517844</td>
    </tr>
    <tr>
      <th>PHYSICIAN</th>
      <td>3091631</td>
    </tr>
    <tr>
      <th>CONSULTANT</th>
      <td>1613669</td>
    </tr>
    <tr>
      <th>LAWYER</th>
      <td>1556579</td>
    </tr>
    <tr>
      <th>PROFESSOR</th>
      <td>1471324</td>
    </tr>
    <tr>
      <th>CEO</th>
      <td>1311635</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看每个职业捐款人的数量</span></span><br><span class="line">c_itcont[<span class="string">&#x27;OCCUPATION&#x27;</span>].value_counts().head(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>




<pre><code>NOT EMPLOYED    223969
RETIRED         102114
ATTORNEY         19155
PHYSICIAN        13112
NOT PROVIDED     12732
CONSULTANT        7976
PROFESSOR         7882
TEACHER           7667
ENGINEER          7260
LAWYER            6286
Name: OCCUPATION, dtype: int64
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 每个州获捐款的总额，然后排序，取前五位</span></span><br><span class="line">c_itcont.groupby(<span class="string">&quot;STATE&quot;</span>).<span class="built_in">sum</span>(<span class="string">&quot;TRANSACTION_AMT&quot;</span>).sort_values(<span class="string">&quot;TRANSACTION_AMT&quot;</span>,ascending=<span class="literal">False</span>).head(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>TRANSACTION_AMT</th>
    </tr>
    <tr>
      <th>STATE</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>CA</th>
      <td>19222386</td>
    </tr>
    <tr>
      <th>NY</th>
      <td>11243839</td>
    </tr>
    <tr>
      <th>FL</th>
      <td>7418137</td>
    </tr>
    <tr>
      <th>TX</th>
      <td>7364516</td>
    </tr>
    <tr>
      <th>MA</th>
      <td>5128879</td>
    </tr>
    <tr>
      <th>WA</th>
      <td>4248597</td>
    </tr>
    <tr>
      <th>VA</th>
      <td>3465543</td>
    </tr>
    <tr>
      <th>IL</th>
      <td>3374161</td>
    </tr>
    <tr>
      <th>PA</th>
      <td>3195739</td>
    </tr>
    <tr>
      <th>MD</th>
      <td>2850272</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看每个州捐款人的数量</span></span><br><span class="line">c_itcont[<span class="string">&#x27;STATE&#x27;</span>].value_counts().head(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>




<pre><code>CA    116739
NY     46236
FL     46089
TX     45046
MA     28272
WA     26582
PA     24847
VA     22727
IL     21143
MD     19107
Name: STATE, dtype: int64
</code></pre>
<h3 id="数据可视化"><a href="#数据可视化" class="headerlink" title="数据可视化"></a>数据可视化</h3><p>首先导入相关Python库</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入matplotlib中的pyplot</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="comment"># 为了使matplotlib图形能够内联显示</span></span><br><span class="line">%matplotlib inline</span><br><span class="line"><span class="comment"># 导入词云库</span></span><br><span class="line"><span class="keyword">from</span> wordcloud <span class="keyword">import</span> WordCloud,ImageColorGenerator</span><br></pre></td></tr></table></figure>

<h4 id="按州总捐款数和总捐款人数柱状图"><a href="#按州总捐款数和总捐款人数柱状图" class="headerlink" title="按州总捐款数和总捐款人数柱状图"></a>按州总捐款数和总捐款人数柱状图</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">st_amt = c_itcont.groupby(<span class="string">&quot;STATE&quot;</span>).<span class="built_in">sum</span>(<span class="string">&quot;TRANSACTION_AMT&quot;</span>).sort_values(<span class="string">&quot;TRANSACTION_AMT&quot;</span>,ascending=<span class="literal">False</span>).head(<span class="number">10</span>)</span><br><span class="line">st_amt.plot(kind=<span class="string">&#x27;bar&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;AxesSubplot:xlabel=&#39;STATE&#39;&gt;
</code></pre>
<img src="/2022/11/13/%E9%98%BF%E9%87%8C%E4%BA%91AI%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%E7%94%A8Pandas%E6%8F%AD%E7%A7%98%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E7%9A%84%E6%80%BB%E7%BB%9F%E5%96%9C%E5%A5%BD/output_49_1.png" class="">
<h4 id="各州捐款总人数可视化"><a href="#各州捐款总人数可视化" class="headerlink" title="各州捐款总人数可视化"></a>各州捐款总人数可视化</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">st_amt = c_itcont[<span class="string">&#x27;STATE&#x27;</span>].value_counts().head(<span class="number">10</span>)</span><br><span class="line">st_amt.plot(kind=<span class="string">&#x27;bar&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;AxesSubplot:&gt;
</code></pre>
<img src="/2022/11/13/%E9%98%BF%E9%87%8C%E4%BA%91AI%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%E7%94%A8Pandas%E6%8F%AD%E7%A7%98%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E7%9A%84%E6%80%BB%E7%BB%9F%E5%96%9C%E5%A5%BD/output_51_1.png" class="">
<h4 id="热门候选人拜登在各州的获得的捐赠占比"><a href="#热门候选人拜登在各州的获得的捐赠占比" class="headerlink" title="热门候选人拜登在各州的获得的捐赠占比"></a>热门候选人拜登在各州的获得的捐赠占比</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 从所有数据中取出支持拜登的数据</span></span><br><span class="line">biden = c_itcont[c_itcont[<span class="string">&quot;CAND_NAME&quot;</span>]==<span class="string">&#x27;BIDEN, JOSEPH R JR&#x27;</span>]</span><br><span class="line"><span class="comment"># 统计各州对拜登的捐款总数</span></span><br><span class="line">biden_state = biden.groupby(<span class="string">&#x27;STATE&#x27;</span>).<span class="built_in">sum</span>().sort_values(<span class="string">&quot;TRANSACTION_AMT&quot;</span>, ascending=<span class="literal">False</span>).head(<span class="number">10</span>)</span><br><span class="line"><span class="comment"># 饼图可视化各州捐款数据占比</span></span><br><span class="line"><span class="comment">#biden_state.plot.pie(figsize=(10, 10),autopct=&#x27;%0.2f%%&#x27;,subplots=True)</span></span><br><span class="line">biden_state.plot.pie(figsize=(<span class="number">10</span>, <span class="number">10</span>),autopct=<span class="string">&#x27;%0.2f%%&#x27;</span>,subplots=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>




<pre><code>array([&lt;AxesSubplot:ylabel=&#39;TRANSACTION_AMT&#39;&gt;], dtype=object)
</code></pre>
<img src="/2022/11/13/%E9%98%BF%E9%87%8C%E4%BA%91AI%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%E7%94%A8Pandas%E6%8F%AD%E7%A7%98%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E7%9A%84%E6%80%BB%E7%BB%9F%E5%96%9C%E5%A5%BD/output_53_1.png" class="">
<h4 id="总捐最多的候选人捐赠者词云图"><a href="#总捐最多的候选人捐赠者词云图" class="headerlink" title="总捐最多的候选人捐赠者词云图"></a>总捐最多的候选人捐赠者词云图</h4><p>通过数据分析中获得捐赠总额前三的候选人统计中可以看出拜登在2020.7.22-2020.8.20这期间获得捐赠的总额是最多的，所以我们以拜登为原模型，制作词云图。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> wordcloud</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name = c_itcont.groupby(<span class="string">&quot;NAME&quot;</span>).<span class="built_in">sum</span>(<span class="string">&quot;TRANSACTION_AMT&quot;</span>).sort_values(<span class="string">&quot;TRANSACTION_AMT&quot;</span>,ascending=<span class="literal">False</span>).head(<span class="number">200</span>)</span><br><span class="line">name</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>TRANSACTION_AMT</th>
    </tr>
    <tr>
      <th>NAME</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>BLOOMBERG, MICHAEL R.</th>
      <td>3451795</td>
    </tr>
    <tr>
      <th>COLBURN, RICHARD</th>
      <td>248527</td>
    </tr>
    <tr>
      <th>PEYKOFF, ANDREW II</th>
      <td>248500</td>
    </tr>
    <tr>
      <th>FIGLESTHALER, WILLIAM MATTHEW MD</th>
      <td>245821</td>
    </tr>
    <tr>
      <th>SHORT, ROBERT G</th>
      <td>101344</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
    </tr>
    <tr>
      <th>SMITH, JEFFREY E</th>
      <td>10000</td>
    </tr>
    <tr>
      <th>NEAL, REBECCA</th>
      <td>10000</td>
    </tr>
    <tr>
      <th>SHIRLEY, STEVE</th>
      <td>10000</td>
    </tr>
    <tr>
      <th>VIVIAN, GARY</th>
      <td>10000</td>
    </tr>
    <tr>
      <th>SMITH, FREDERICA</th>
      <td>10000</td>
    </tr>
  </tbody>
</table>
<p>200 rows × 1 columns</p>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">name = name.to_dict()[<span class="string">&#x27;TRANSACTION_AMT&#x27;</span>]</span><br><span class="line">w = wordcloud.WordCloud(width=<span class="number">800</span>,height=<span class="number">400</span>,background_color=<span class="string">&#x27;white&#x27;</span>,prefer_horizontal=<span class="number">1</span>)</span><br><span class="line">w.generate_from_frequencies(name)</span><br><span class="line">plt.rcParams[<span class="string">&quot;figure.figsize&quot;</span>] = (<span class="number">100</span>, <span class="number">50</span>)</span><br><span class="line">plt.imshow(w)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.image.AxesImage at 0x7fef25d79460&gt;
</code></pre>
<img src="/2022/11/13/%E9%98%BF%E9%87%8C%E4%BA%91AI%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%E7%94%A8Pandas%E6%8F%AD%E7%A7%98%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E7%9A%84%E6%80%BB%E7%BB%9F%E5%96%9C%E5%A5%BD/output_57_1.png" class="">


<h4 id="按州总捐款热力地图"><a href="#按州总捐款热力地图" class="headerlink" title="按州总捐款热力地图"></a>按州总捐款热力地图</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">!pip install pyecharts</span><br><span class="line">!pip install echarts-countries-pypkg</span><br></pre></td></tr></table></figure>

<pre><code>Looking in indexes: https://pypi.tuna.tsinghua.edu.cn/simple
Requirement already satisfied: pyecharts in /Users/jackgan/opt/anaconda3/lib/python3.9/site-packages (1.9.1)
Requirement already satisfied: jinja2 in /Users/jackgan/opt/anaconda3/lib/python3.9/site-packages (from pyecharts) (2.11.3)
Requirement already satisfied: prettytable in /Users/jackgan/opt/anaconda3/lib/python3.9/site-packages (from pyecharts) (3.5.0)
Requirement already satisfied: simplejson in /Users/jackgan/opt/anaconda3/lib/python3.9/site-packages (from pyecharts) (3.17.6)
Requirement already satisfied: MarkupSafe&gt;=0.23 in /Users/jackgan/opt/anaconda3/lib/python3.9/site-packages (from jinja2-&gt;pyecharts) (2.0.1)
Requirement already satisfied: wcwidth in /Users/jackgan/opt/anaconda3/lib/python3.9/site-packages (from prettytable-&gt;pyecharts) (0.2.5)
Looking in indexes: https://pypi.tuna.tsinghua.edu.cn/simple
Requirement already satisfied: echarts-countries-pypkg in /Users/jackgan/opt/anaconda3/lib/python3.9/site-packages (0.1.6)
Requirement already satisfied: lml&gt;=0.0.2 in /Users/jackgan/opt/anaconda3/lib/python3.9/site-packages (from echarts-countries-pypkg) (0.1.0)
Requirement already satisfied: pyecharts-jupyter-installer==0.0.3 in /Users/jackgan/opt/anaconda3/lib/python3.9/site-packages (from echarts-countries-pypkg) (0.0.3)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">states = c_itcont.groupby(<span class="string">&quot;STATE&quot;</span>).<span class="built_in">sum</span>(<span class="string">&quot;TRANSACTION_AMT&quot;</span>).sort_values(<span class="string">&quot;TRANSACTION_AMT&quot;</span>,ascending=<span class="literal">False</span>)</span><br><span class="line">states </span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>TRANSACTION_AMT</th>
    </tr>
    <tr>
      <th>STATE</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>CA</th>
      <td>19222386</td>
    </tr>
    <tr>
      <th>NY</th>
      <td>11243839</td>
    </tr>
    <tr>
      <th>FL</th>
      <td>7418137</td>
    </tr>
    <tr>
      <th>TX</th>
      <td>7364516</td>
    </tr>
    <tr>
      <th>MA</th>
      <td>5128879</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
    </tr>
    <tr>
      <th>AA</th>
      <td>4560</td>
    </tr>
    <tr>
      <th>MP</th>
      <td>609</td>
    </tr>
    <tr>
      <th>PW</th>
      <td>449</td>
    </tr>
    <tr>
      <th>AS</th>
      <td>232</td>
    </tr>
    <tr>
      <th>FM</th>
      <td>63</td>
    </tr>
  </tbody>
</table>
<p>63 rows × 1 columns</p>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#美国各州简称与全称映射表</span></span><br><span class="line">state_data=&#123;<span class="string">&quot;AL&quot;</span>:<span class="string">&quot;Alabama&quot;</span>,<span class="string">&quot;AK&quot;</span>:<span class="string">&quot;Alaska&quot;</span>,<span class="string">&quot;AZ&quot;</span>:<span class="string">&quot;Arizona&quot;</span>,<span class="string">&quot;AR&quot;</span>:<span class="string">&quot;Arkansas&quot;</span>,<span class="string">&quot;CA&quot;</span>:<span class="string">&quot;California&quot;</span>,<span class="string">&quot;CO&quot;</span>:<span class="string">&quot;Colorado&quot;</span>,<span class="string">&quot;CT&quot;</span>:<span class="string">&quot;Connecticut&quot;</span>,</span><br><span class="line"> <span class="string">&quot;DE&quot;</span>:<span class="string">&quot;Delaware&quot;</span>,<span class="string">&quot;FL&quot;</span>:<span class="string">&quot;Florida&quot;</span>,<span class="string">&quot;GA&quot;</span>:<span class="string">&quot;Georgia&quot;</span>,<span class="string">&quot;HI&quot;</span>:<span class="string">&quot;Hawaii&quot;</span>,<span class="string">&quot;ID&quot;</span>:<span class="string">&quot;Idaho&quot;</span>,<span class="string">&quot;IL&quot;</span>:<span class="string">&quot;Illinois&quot;</span>,<span class="string">&quot;IN&quot;</span>:<span class="string">&quot;Indiana&quot;</span>,<span class="string">&quot;IA&quot;</span>:<span class="string">&quot;Iowa&quot;</span>,</span><br><span class="line"> <span class="string">&quot;KS&quot;</span>:<span class="string">&quot;Kansas&quot;</span>,<span class="string">&quot;KY&quot;</span>:<span class="string">&quot;Kentucky&quot;</span>,<span class="string">&quot;LA&quot;</span>:<span class="string">&quot;Louisana&quot;</span>,<span class="string">&quot;ME&quot;</span>:<span class="string">&quot;Maine&quot;</span>,<span class="string">&quot;MD&quot;</span>:<span class="string">&quot;Maryland&quot;</span>,<span class="string">&quot;MA&quot;</span>:<span class="string">&quot;Massachusetts&quot;</span>,<span class="string">&quot;MI&quot;</span>:<span class="string">&quot;Michigan&quot;</span>,</span><br><span class="line"> <span class="string">&quot;MN&quot;</span>:<span class="string">&quot;Minnesota&quot;</span>,<span class="string">&quot;MS&quot;</span>:<span class="string">&quot;Mississippi&quot;</span>,<span class="string">&quot;MO&quot;</span>:<span class="string">&quot;Missouri&quot;</span>,<span class="string">&quot;MT&quot;</span>:<span class="string">&quot;Montana&quot;</span>,<span class="string">&quot;NE&quot;</span>:<span class="string">&quot;Nebraska&quot;</span>,<span class="string">&quot;NV&quot;</span>:<span class="string">&quot;Nevada&quot;</span>,<span class="string">&quot;NH&quot;</span>:<span class="string">&quot;New Hampshire&quot;</span>, </span><br><span class="line"> <span class="string">&quot;NJ&quot;</span>:<span class="string">&quot;New Jersey&quot;</span>,<span class="string">&quot;NM&quot;</span>:<span class="string">&quot;New Mexico&quot;</span>,<span class="string">&quot;NY&quot;</span>:<span class="string">&quot;New York&quot;</span>,<span class="string">&quot;NC&quot;</span>:<span class="string">&quot;North Carolina&quot;</span>,<span class="string">&quot;ND&quot;</span>:<span class="string">&quot;North Dakota&quot;</span>,<span class="string">&quot;OH&quot;</span>:<span class="string">&quot;Ohio&quot;</span>,<span class="string">&quot;OK&quot;</span>:<span class="string">&quot;Oklahoma&quot;</span>,</span><br><span class="line"> <span class="string">&quot;OR&quot;</span>:<span class="string">&quot;Oregon&quot;</span>,<span class="string">&quot;PA&quot;</span>:<span class="string">&quot;Pennsylvania&quot;</span>,<span class="string">&quot;RI&quot;</span>:<span class="string">&quot;Rhode Island&quot;</span>,<span class="string">&quot;SC&quot;</span>:<span class="string">&quot;South Carolina&quot;</span>,<span class="string">&quot;SD&quot;</span>:<span class="string">&quot;South Dakota&quot;</span>,<span class="string">&quot;TN&quot;</span>:<span class="string">&quot;Tennessee&quot;</span>,</span><br><span class="line"> <span class="string">&quot;TX&quot;</span>:<span class="string">&quot;Texas&quot;</span>,<span class="string">&quot;UT&quot;</span>:<span class="string">&quot;Utah&quot;</span>,<span class="string">&quot;VT&quot;</span>:<span class="string">&quot;Vermont&quot;</span>,<span class="string">&quot;VA&quot;</span>:<span class="string">&quot;Virginia&quot;</span>,<span class="string">&quot;WA&quot;</span>:<span class="string">&quot;Washington&quot;</span>,<span class="string">&quot;WV&quot;</span>:<span class="string">&quot;West Virginia&quot;</span>,<span class="string">&quot;WI&quot;</span>:<span class="string">&quot;Wisconsin&quot;</span>,</span><br><span class="line"> <span class="string">&quot;WY&quot;</span>:<span class="string">&quot;Wyoming&quot;</span>,<span class="string">&quot;NOT PROVIDED&quot;</span>:<span class="string">&quot;NP&quot;</span>&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">idx = [state_data[state] <span class="keyword">if</span> state <span class="keyword">in</span> state_data <span class="keyword">else</span> state <span class="keyword">for</span> state <span class="keyword">in</span> states[<span class="string">&#x27;TRANSACTION_AMT&#x27;</span>].index]</span><br><span class="line">val = [math.log(i) <span class="keyword">for</span> i <span class="keyword">in</span> states[<span class="string">&#x27;TRANSACTION_AMT&#x27;</span>].values]</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 只需要在顶部声明 CurrentConfig.ONLINE_HOST 即可</span></span><br><span class="line"><span class="keyword">from</span> pyecharts.<span class="built_in">globals</span> <span class="keyword">import</span> CurrentConfig</span><br><span class="line">CurrentConfig.ONLINE_HOST = <span class="string">&quot;http://127.0.0.1:8000/assets/&quot;</span></span><br><span class="line"><span class="keyword">from</span> pyecharts <span class="keyword">import</span> options <span class="keyword">as</span> opts</span><br><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Map</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line">c = (</span><br><span class="line">    Map(init_opts = opts.InitOpts(width=<span class="string">&quot;1200px&quot;</span>, height=<span class="string">&quot;800px&quot;</span>))</span><br><span class="line">    .add(</span><br><span class="line">        <span class="string">&quot;STATE&quot;</span>,</span><br><span class="line">        <span class="comment"># 按顺序：省份名字及其值</span></span><br><span class="line">        [<span class="built_in">list</span>(z) <span class="keyword">for</span> z <span class="keyword">in</span> <span class="built_in">zip</span>(idx, val)],</span><br><span class="line">        <span class="comment"># 放在哪个地图上</span></span><br><span class="line">        <span class="string">&quot;美国&quot;</span>,</span><br><span class="line">        <span class="comment"># 是否在每个行政区上面显示这个行政区的名字</span></span><br><span class="line">        label_opts=opts.LabelOpts(is_show=<span class="literal">True</span>),</span><br><span class="line">        is_map_symbol_show = <span class="literal">True</span>,</span><br><span class="line">    )</span><br><span class="line">    .set_global_opts(</span><br><span class="line">        <span class="comment"># 设置热力图中的最大值是多少</span></span><br><span class="line">        visualmap_opts=opts.VisualMapOpts(max_=<span class="built_in">max</span>(val)),</span><br><span class="line">    )</span><br><span class="line">    <span class="comment"># 保存，以及文件名</span></span><br><span class="line">    .render_notebook()</span><br><span class="line">)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c</span><br></pre></td></tr></table></figure>





<script>
    require.config({
        paths: {
            'echarts':'http://127.0.0.1:8000/assets/echarts.min', '美国':'http://127.0.0.1:8000/assets/maps/USA'
        }
    });
</script>

<pre><code>    &lt;div id=&quot;37f5b35d8e074d4d89d017f37d36c89c&quot; style=&quot;width:1200px; height:800px;&quot;&gt;&lt;/div&gt;
</code></pre>
<script>
        require(['echarts', '美国'], function(echarts) {
                var chart_37f5b35d8e074d4d89d017f37d36c89c = echarts.init(
                    document.getElementById('37f5b35d8e074d4d89d017f37d36c89c'), 'white', {renderer: 'canvas'});
                var option_37f5b35d8e074d4d89d017f37d36c89c = {
    "animation": true,
    "animationThreshold": 2000,
    "animationDuration": 1000,
    "animationEasing": "cubicOut",
    "animationDelay": 0,
    "animationDurationUpdate": 300,
    "animationEasingUpdate": "cubicOut",
    "animationDelayUpdate": 0,
    "color": [
        "#c23531",
        "#2f4554",
        "#61a0a8",
        "#d48265",
        "#749f83",
        "#ca8622",
        "#bda29a",
        "#6e7074",
        "#546570",
        "#c4ccd3",
        "#f05b72",
        "#ef5b9c",
        "#f47920",
        "#905a3d",
        "#fab27b",
        "#2a5caa",
        "#444693",
        "#726930",
        "#b2d235",
        "#6d8346",
        "#ac6767",
        "#1d953f",
        "#6950a1",
        "#918597"
    ],
    "series": [
        {
            "type": "map",
            "name": "STATE",
            "label": {
                "show": true,
                "position": "top",
                "margin": 8
            },
            "mapType": "\u7f8e\u56fd",
            "data": [
                {
                    "name": "California",
                    "value": 16.77158609532075
                },
                {
                    "name": "New York",
                    "value": 16.23533089215827
                },
                {
                    "name": "Florida",
                    "value": 15.819438505451048
                },
                {
                    "name": "Texas",
                    "value": 15.812183889494072
                },
                {
                    "name": "Massachusetts",
                    "value": 15.450397674749784
                },
                {
                    "name": "Washington",
                    "value": 15.262099368752715
                },
                {
                    "name": "Virginia",
                    "value": 15.058379888285128
                },
                {
                    "name": "Illinois",
                    "value": 15.031657258791915
                },
                {
                    "name": "Pennsylvania",
                    "value": 14.977328917952843
                },
                {
                    "name": "Maryland",
                    "value": 14.862924986287352
                },
                {
                    "name": "Colorado",
                    "value": 14.710727591073063
                },
                {
                    "name": "Georgia",
                    "value": 14.704334302226343
                },
                {
                    "name": "New Jersey",
                    "value": 14.700053004426989
                },
                {
                    "name": "North Carolina",
                    "value": 14.633345768629988
                },
                {
                    "name": "Ohio",
                    "value": 14.498619018764867
                },
                {
                    "name": "Michigan",
                    "value": 14.496354867617423
                },
                {
                    "name": "Oregon",
                    "value": 14.47528242766989
                },
                {
                    "name": "Arizona",
                    "value": 14.473934297465833
                },
                {
                    "name": "DC",
                    "value": 14.440240772600392
                },
                {
                    "name": "Minnesota",
                    "value": 14.29357845839208
                },
                {
                    "name": "Connecticut",
                    "value": 14.118282700448386
                },
                {
                    "name": "Tennessee",
                    "value": 14.108151813316038
                },
                {
                    "name": "Missouri",
                    "value": 13.968344085012252
                },
                {
                    "name": "Wisconsin",
                    "value": 13.850111964684272
                },
                {
                    "name": "South Carolina",
                    "value": 13.760329716849531
                },
                {
                    "name": "Nevada",
                    "value": 13.719748275977157
                },
                {
                    "name": "Indiana",
                    "value": 13.691956652825588
                },
                {
                    "name": "Oklahoma",
                    "value": 13.662464268073888
                },
                {
                    "name": "New Mexico",
                    "value": 13.517519530361318
                },
                {
                    "name": "New Hampshire",
                    "value": 13.513922916339954
                },
                {
                    "name": "Louisana",
                    "value": 13.356090722258184
                },
                {
                    "name": "Alabama",
                    "value": 13.350773038391038
                },
                {
                    "name": "Delaware",
                    "value": 13.243316494150976
                },
                {
                    "name": "Kentucky",
                    "value": 13.160258211968937
                },
                {
                    "name": "Utah",
                    "value": 13.153782583942455
                },
                {
                    "name": "Kansas",
                    "value": 13.102992976684783
                },
                {
                    "name": "Iowa",
                    "value": 13.003937885417065
                },
                {
                    "name": "Alaska",
                    "value": 12.951805160434446
                },
                {
                    "name": "Maine",
                    "value": 12.925162876069889
                },
                {
                    "name": "Hawaii",
                    "value": 12.908575921014144
                },
                {
                    "name": "Arkansas",
                    "value": 12.847510655764474
                },
                {
                    "name": "Wyoming",
                    "value": 12.822487258851842
                },
                {
                    "name": "Idaho",
                    "value": 12.807710165156173
                },
                {
                    "name": "Rhode Island",
                    "value": 12.680889671771439
                },
                {
                    "name": "Mississippi",
                    "value": 12.63630841196355
                },
                {
                    "name": "Montana",
                    "value": 12.551858518136736
                },
                {
                    "name": "Vermont",
                    "value": 12.457484846808923
                },
                {
                    "name": "Nebraska",
                    "value": 12.452252804869431
                },
                {
                    "name": "ZZ",
                    "value": 12.404546383994097
                },
                {
                    "name": "South Dakota",
                    "value": 12.0431712899757
                },
                {
                    "name": "West Virginia",
                    "value": 11.989327331769568
                },
                {
                    "name": "North Dakota",
                    "value": 11.732831782091454
                },
                {
                    "name": "GU",
                    "value": 11.059739620650653
                },
                {
                    "name": "NP",
                    "value": 10.318473856527929
                },
                {
                    "name": "AE",
                    "value": 10.273083657563381
                },
                {
                    "name": "PR",
                    "value": 10.027782671807735
                },
                {
                    "name": "VI",
                    "value": 9.48303570211964
                },
                {
                    "name": "AP",
                    "value": 8.896724917497897
                },
                {
                    "name": "AA",
                    "value": 8.425077902508432
                },
                {
                    "name": "MP",
                    "value": 6.411818267709897
                },
                {
                    "name": "PW",
                    "value": 6.1070228877422545
                },
                {
                    "name": "AS",
                    "value": 5.44673737166631
                },
                {
                    "name": "FM",
                    "value": 4.143134726391533
                }
            ],
            "roam": true,
            "aspectScale": 0.75,
            "nameProperty": "name",
            "selectedMode": false,
            "zoom": 1,
            "mapValueCalculation": "sum",
            "showLegendSymbol": true,
            "emphasis": {}
        }
    ],
    "legend": [
        {
            "data": [
                "STATE"
            ],
            "selected": {
                "STATE": true
            },
            "show": true,
            "padding": 5,
            "itemGap": 10,
            "itemWidth": 25,
            "itemHeight": 14
        }
    ],
    "tooltip": {
        "show": true,
        "trigger": "item",
        "triggerOn": "mousemove|click",
        "axisPointer": {
            "type": "line"
        },
        "showContent": true,
        "alwaysShowContent": false,
        "showDelay": 0,
        "hideDelay": 100,
        "textStyle": {
            "fontSize": 14
        },
        "borderWidth": 0,
        "padding": 5
    },
    "title": [
        {
            "padding": 5,
            "itemGap": 10
        }
    ],
    "visualMap": {
        "show": true,
        "type": "continuous",
        "min": 0,
        "max": 16.77158609532075,
        "inRange": {
            "color": [
                "#50a3ba",
                "#eac763",
                "#d94e5d"
            ]
        },
        "calculable": true,
        "inverse": false,
        "splitNumber": 5,
        "orient": "vertical",
        "showLabel": true,
        "itemWidth": 20,
        "itemHeight": 140,
        "borderWidth": 0
    }
};
                chart_37f5b35d8e074d4d89d017f37d36c89c.setOption(option_37f5b35d8e074d4d89d017f37d36c89c);
        });
    </script>


<h4 id="收到捐赠额最多的两位候选人的总捐赠额变化趋势"><a href="#收到捐赠额最多的两位候选人的总捐赠额变化趋势" class="headerlink" title="收到捐赠额最多的两位候选人的总捐赠额变化趋势"></a>收到捐赠额最多的两位候选人的总捐赠额变化趋势</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#拜登获得捐赠额随时间变化</span></span><br><span class="line">biden = c_itcont[c_itcont[<span class="string">&quot;CAND_NAME&quot;</span>]==<span class="string">&#x27;BIDEN, JOSEPH R JR&#x27;</span>]</span><br><span class="line">biden_date = biden.groupby(<span class="string">&#x27;TRANSACTION_DT&#x27;</span>).<span class="built_in">sum</span>().sort_values(<span class="string">&quot;TRANSACTION_DT&quot;</span>, ascending=<span class="literal">True</span>)</span><br><span class="line"><span class="comment">#川普获得捐赠额随时间变化</span></span><br><span class="line">trump = c_itcont[c_itcont[<span class="string">&quot;CAND_NAME&quot;</span>]==<span class="string">&#x27;TRUMP, DONALD J.&#x27;</span>]</span><br><span class="line">trump_date = trump.groupby(<span class="string">&#x27;TRANSACTION_DT&#x27;</span>).<span class="built_in">sum</span>().sort_values(<span class="string">&quot;TRANSACTION_DT&quot;</span>, ascending=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="built_in">list</span>(biden_date.index)</span><br><span class="line">trump_transaction=<span class="built_in">list</span>(trump_date.values)</span><br><span class="line">biden_transaction=<span class="built_in">list</span>(biden_date.values)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment">#设置画布大小</span></span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>,<span class="number">6</span>), dpi=<span class="number">80</span>)</span><br><span class="line"><span class="comment">#画trump趋势线</span></span><br><span class="line">plt.plot(x,trump_transaction,color=<span class="string">&#x27;red&#x27;</span>,linewidth=<span class="number">2.5</span>,label=<span class="string">&#x27;trump&#x27;</span>)</span><br><span class="line"><span class="comment">#画biden趋势线</span></span><br><span class="line">plt.plot(x,biden_transaction,color=<span class="string">&#x27;blue&#x27;</span>,linewidth=<span class="number">2.5</span>,label=<span class="string">&#x27;biden&#x27;</span>)</span><br><span class="line"><span class="comment">#横轴标题</span></span><br><span class="line">plt.xlabel(<span class="string">&quot;Date&quot;</span>)</span><br><span class="line"><span class="comment">#横轴刻度</span></span><br><span class="line">plt.xticks(x,rotation=<span class="string">&#x27;vertical&#x27;</span>)</span><br><span class="line"><span class="comment">#纵轴标题</span></span><br><span class="line">plt.ylabel(<span class="string">&quot;Transaction($)&quot;</span>)</span><br><span class="line"><span class="comment">#纵轴上下限</span></span><br><span class="line">plt.ylim(<span class="number">0</span>,<span class="number">10000000</span>)</span><br><span class="line"><span class="comment">#纵轴刻度</span></span><br><span class="line">plt.yticks(np.linspace(<span class="number">0</span>,<span class="number">10000000</span>,<span class="number">21</span>,endpoint=<span class="literal">True</span>))</span><br><span class="line"><span class="comment">#显示图标</span></span><br><span class="line">plt.legend(loc=<span class="string">&#x27;upper left&#x27;</span>)</span><br><span class="line"><span class="comment">#注释异常点</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#设置标题</span></span><br><span class="line">plt.title(<span class="string">&quot;2020.7.22 - 2020.8.20 Trump Transaction VS Biden Transaction&quot;</span>)</span><br><span class="line"><span class="comment">#设置网格</span></span><br><span class="line">plt.grid(<span class="literal">True</span>,linestyle=<span class="string">&#x27;--&#x27;</span>,alpha=<span class="number">1</span>)</span><br><span class="line"><span class="comment">#展示图表</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<img src="/2022/11/13/%E9%98%BF%E9%87%8C%E4%BA%91AI%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%E7%94%A8Pandas%E6%8F%AD%E7%A7%98%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E7%9A%84%E6%80%BB%E7%BB%9F%E5%96%9C%E5%A5%BD/output_66_0.png" class="">
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">trump = c_itcont[c_itcont[<span class="string">&quot;CAND_NAME&quot;</span>]==<span class="string">&#x27;TRUMP, DONALD J.&#x27;</span>]</span><br><span class="line">trump_state = trump.groupby(<span class="string">&quot;STATE&quot;</span>).<span class="built_in">sum</span>().sort_values(<span class="string">&quot;TRANSACTION_AMT&quot;</span>, ascending=<span class="literal">False</span>)</span><br><span class="line">biden = c_itcont[c_itcont[<span class="string">&quot;CAND_NAME&quot;</span>]==<span class="string">&#x27;BIDEN, JOSEPH R JR&#x27;</span>]</span><br><span class="line">biden_state = biden.groupby(<span class="string">&quot;STATE&quot;</span>).<span class="built_in">sum</span>().sort_values(<span class="string">&quot;TRANSACTION_AMT&quot;</span>, ascending=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x1 = <span class="built_in">list</span>(trump_state[<span class="string">&#x27;TRANSACTION_AMT&#x27;</span>].index)</span><br><span class="line">y1 = <span class="built_in">list</span>(trump_state[<span class="string">&#x27;TRANSACTION_AMT&#x27;</span>].values)</span><br><span class="line">x2 = <span class="built_in">list</span>(biden_state[<span class="string">&#x27;TRANSACTION_AMT&#x27;</span>].index)</span><br><span class="line">y2 = <span class="built_in">list</span>(biden_state[<span class="string">&#x27;TRANSACTION_AMT&#x27;</span>].values)</span><br></pre></td></tr></table></figure>

<h4 id="收到捐赠额最多的两位候选人的各州捐赠额对比"><a href="#收到捐赠额最多的两位候选人的各州捐赠额对比" class="headerlink" title="收到捐赠额最多的两位候选人的各州捐赠额对比"></a>收到捐赠额最多的两位候选人的各州捐赠额对比</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment">#设置画布大小</span></span><br><span class="line">plt.figure(figsize=(<span class="number">20</span>,<span class="number">30</span>), dpi=<span class="number">80</span>)</span><br><span class="line"><span class="comment">#画trump趋势线</span></span><br><span class="line">ax1 = plt.subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">plt.barh(x1,y1,color=<span class="string">&#x27;red&#x27;</span>,label=<span class="string">&#x27;trump&#x27;</span>)</span><br><span class="line"><span class="comment"># #横轴标题</span></span><br><span class="line">plt.xlabel(<span class="string">&quot;Transaction($)&quot;</span>)</span><br><span class="line">ax1.invert_yaxis()</span><br><span class="line"><span class="comment"># #横轴刻度</span></span><br><span class="line">plt.xticks(y1)</span><br><span class="line"><span class="comment"># 横轴上下限</span></span><br><span class="line">plt.xlim(<span class="number">0</span>,<span class="number">15000000</span>)</span><br><span class="line"><span class="comment"># 横轴刻度</span></span><br><span class="line">plt.xticks(np.linspace(<span class="number">0</span>,<span class="number">15000000</span>,<span class="number">11</span>,endpoint=<span class="literal">True</span>))</span><br><span class="line"><span class="comment"># 横轴标题</span></span><br><span class="line">plt.ylabel(<span class="string">&quot;State&quot;</span>)</span><br><span class="line"><span class="comment"># #显示图标</span></span><br><span class="line">plt.legend(loc=<span class="string">&#x27;lower right&#x27;</span>)</span><br><span class="line">plt.grid(<span class="literal">True</span>,linestyle=<span class="string">&#x27;--&#x27;</span>,alpha=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># #设置标题</span></span><br><span class="line">plt.title(<span class="string">&quot;Trump Transaction for each state&quot;</span>)</span><br><span class="line"><span class="comment"># #设置网格</span></span><br><span class="line">ax1 = plt.subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line"><span class="comment">#画biden趋势线</span></span><br><span class="line">plt.barh(x2,y2,color=<span class="string">&#x27;blue&#x27;</span>,label=<span class="string">&#x27;biden&#x27;</span>)</span><br><span class="line"><span class="comment"># #横轴标题</span></span><br><span class="line">plt.xlabel(<span class="string">&quot;Transaction($)&quot;</span>)</span><br><span class="line">ax1.invert_yaxis()</span><br><span class="line"><span class="comment"># #横轴刻度</span></span><br><span class="line">plt.xticks(y1)</span><br><span class="line"><span class="comment"># 横轴上下限</span></span><br><span class="line">plt.xlim(<span class="number">0</span>,<span class="number">15000000</span>)</span><br><span class="line"><span class="comment"># 横轴刻度</span></span><br><span class="line">plt.xticks(np.linspace(<span class="number">0</span>,<span class="number">15000000</span>,<span class="number">11</span>,endpoint=<span class="literal">True</span>))</span><br><span class="line"><span class="comment"># 横轴标题</span></span><br><span class="line">plt.ylabel(<span class="string">&quot;State&quot;</span>)</span><br><span class="line"><span class="comment"># #显示图标</span></span><br><span class="line">plt.legend(loc=<span class="string">&#x27;lower right&#x27;</span>)</span><br><span class="line">plt.grid(<span class="literal">True</span>,linestyle=<span class="string">&#x27;--&#x27;</span>,alpha=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># #设置标题</span></span><br><span class="line">plt.title(<span class="string">&quot;Biden Transaction for each state&quot;</span>)</span><br><span class="line"><span class="comment">#展示图表</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<img src="/2022/11/13/%E9%98%BF%E9%87%8C%E4%BA%91AI%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%E7%94%A8Pandas%E6%8F%AD%E7%A7%98%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E7%9A%84%E6%80%BB%E7%BB%9F%E5%96%9C%E5%A5%BD/output_69_0.png" class="">

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://ganzhancheng.cn">Jack Gan</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://ganzhancheng.cn/2022/11/13/%E9%98%BF%E9%87%8C%E4%BA%91AI%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%E7%94%A8Pandas%E6%8F%AD%E7%A7%98%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E7%9A%84%E6%80%BB%E7%BB%9F%E5%96%9C%E5%A5%BD/">https://ganzhancheng.cn/2022/11/13/%E9%98%BF%E9%87%8C%E4%BA%91AI%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%E7%94%A8Pandas%E6%8F%AD%E7%A7%98%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E7%9A%84%E6%80%BB%E7%BB%9F%E5%96%9C%E5%A5%BD/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://ganzhancheng.cn" target="_blank">Jack的个人博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/">数据分析</a><a class="post-meta__tags" href="/tags/AI/">AI</a><a class="post-meta__tags" href="/tags/%E9%98%BF%E9%87%8C%E4%BA%91/">阿里云</a><a class="post-meta__tags" href="/tags/%E5%A4%A9%E6%B1%A0/">天池</a><a class="post-meta__tags" href="/tags/pandas/">pandas</a></div><div class="post_share"><div class="social-share" data-image="/img/gallery/cover10.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat_reward.jpeg" target="_blank"><img class="post-qr-code-img" src="/img/wechat_reward.jpeg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/alipay_reward.jpeg" target="_blank"><img class="post-qr-code-img" src="/img/alipay_reward.jpeg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2022/11/07/Anaconda%E4%B8%8Epip%E9%95%9C%E5%83%8F%E6%BA%90%E8%AE%BE%E7%BD%AE/"><img class="next-cover" src="/img/gallery/cover6.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Anaconda与pip镜像源设置</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/11/06/Python%E5%87%BD%E6%95%B0%E5%AD%A6%E4%B9%A0/" title="Python函数学习笔记"><img class="cover" src="/img/gallery/cover7.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-11-06</div><div class="title">Python函数学习笔记</div></div></a></div><div><a href="/2022/11/06/%E9%98%BF%E9%87%8C%E4%BA%91AI%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89%E5%A4%A9%E6%B1%A0%E5%85%A5%E9%97%A8%E4%B8%8E%E5%AE%9E%E8%B7%B5/" title="阿里云AI学习（一）天池入门与实践笔记"><img class="cover" src="/img/gallery/cover2.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-11-06</div><div class="title">阿里云AI学习（一）天池入门与实践笔记</div></div></a></div><div><a href="/2022/09/29/pandas%E5%87%BD%E6%95%B0%E5%A4%A7%E5%85%A8/" title="pandas函数大全"><img class="cover" src="/img/gallery/cover6.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-29</div><div class="title">pandas函数大全</div></div></a></div><div><a href="/2022/09/23/pandas%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE/" title="pandas笔记（一）：查看数据"><img class="cover" src="/img/gallery/cover6.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-23</div><div class="title">pandas笔记（一）：查看数据</div></div></a></div><div><a href="/2022/09/25/pandas%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/" title="pandas笔记（二）"><img class="cover" src="/img/gallery/cover7.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-25</div><div class="title">pandas笔记（二）</div></div></a></div><div><a href="/2022/11/07/Anaconda%E4%B8%8Epip%E9%95%9C%E5%83%8F%E6%BA%90%E8%AE%BE%E7%BD%AE/" title="Anaconda与pip镜像源设置"><img class="cover" src="/img/gallery/cover6.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-11-07</div><div class="title">Anaconda与pip镜像源设置</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Jack Gan</div><div class="author-info__description">一位数据分析师的自我修养</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">28</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">26</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/ganzhancheng2020"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/ganzhancheng2020" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:ganzhancheng@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/img/wechat.jpeg" target="_blank" title="wechat"><i class="fa-brands fa-weixin"></i></a><a class="social-icon" href="https://space.bilibili.com/7522004" target="_blank" title="bilibili"><i class="fa-brands fa-bilibili"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">请多关注</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%9B%E5%89%8D%E5%87%86%E5%A4%87"><span class="toc-number">1.</span> <span class="toc-text">赛前准备</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%9B%86%E6%9D%A5%E6%BA%90%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.2.</span> <span class="toc-text">数据集来源介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9C%80%E8%A6%81%E6%8F%90%E5%89%8D%E5%AE%89%E8%A3%85%E7%9A%84%E5%8C%85"><span class="toc-number">1.3.</span> <span class="toc-text">需要提前安装的包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9C%80%E8%A6%81%E6%8F%90%E5%89%8D%E4%B8%8B%E8%BD%BD%E5%A5%BD%E6%95%B0%E6%8D%AE%E9%9B%86"><span class="toc-number">1.4.</span> <span class="toc-text">需要提前下载好数据集</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86"><span class="toc-number">2.</span> <span class="toc-text">数据处理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%86%E5%A7%94%E5%91%98%E4%BC%9A%E5%92%8C%E5%80%99%E9%80%89%E4%BA%BA%E4%B8%80%E4%B8%80%E5%AF%B9%E5%BA%94%EF%BC%8C%E9%80%9A%E8%BF%87CAND-ID%E5%85%B3%E8%81%94%E4%B8%A4%E4%B8%AA%E8%A1%A8"><span class="toc-number">2.1.</span> <span class="toc-text">将委员会和候选人一一对应，通过CAND_ID关联两个表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%86%E5%80%99%E9%80%89%E4%BA%BA%E5%92%8C%E6%8D%90%E8%B5%A0%E4%BA%BA%E4%B8%80%E4%B8%80%E5%AF%B9%E5%BA%94%EF%BC%8C%E9%80%9A%E8%BF%87CMTE-ID%E5%85%B3%E8%81%94%E4%B8%A4%E4%B8%AA%E8%A1%A8"><span class="toc-number">2.2.</span> <span class="toc-text">将候选人和捐赠人一一对应，通过CMTE_ID关联两个表</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2%E4%B8%8E%E6%B8%85%E6%B4%97"><span class="toc-number">3.</span> <span class="toc-text">数据探索与清洗</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90"><span class="toc-number">4.</span> <span class="toc-text">数据分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96"><span class="toc-number">5.</span> <span class="toc-text">数据可视化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E5%B7%9E%E6%80%BB%E6%8D%90%E6%AC%BE%E6%95%B0%E5%92%8C%E6%80%BB%E6%8D%90%E6%AC%BE%E4%BA%BA%E6%95%B0%E6%9F%B1%E7%8A%B6%E5%9B%BE"><span class="toc-number">5.1.</span> <span class="toc-text">按州总捐款数和总捐款人数柱状图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%84%E5%B7%9E%E6%8D%90%E6%AC%BE%E6%80%BB%E4%BA%BA%E6%95%B0%E5%8F%AF%E8%A7%86%E5%8C%96"><span class="toc-number">5.2.</span> <span class="toc-text">各州捐款总人数可视化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%83%AD%E9%97%A8%E5%80%99%E9%80%89%E4%BA%BA%E6%8B%9C%E7%99%BB%E5%9C%A8%E5%90%84%E5%B7%9E%E7%9A%84%E8%8E%B7%E5%BE%97%E7%9A%84%E6%8D%90%E8%B5%A0%E5%8D%A0%E6%AF%94"><span class="toc-number">5.3.</span> <span class="toc-text">热门候选人拜登在各州的获得的捐赠占比</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E6%8D%90%E6%9C%80%E5%A4%9A%E7%9A%84%E5%80%99%E9%80%89%E4%BA%BA%E6%8D%90%E8%B5%A0%E8%80%85%E8%AF%8D%E4%BA%91%E5%9B%BE"><span class="toc-number">5.4.</span> <span class="toc-text">总捐最多的候选人捐赠者词云图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E5%B7%9E%E6%80%BB%E6%8D%90%E6%AC%BE%E7%83%AD%E5%8A%9B%E5%9C%B0%E5%9B%BE"><span class="toc-number">5.5.</span> <span class="toc-text">按州总捐款热力地图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E5%88%B0%E6%8D%90%E8%B5%A0%E9%A2%9D%E6%9C%80%E5%A4%9A%E7%9A%84%E4%B8%A4%E4%BD%8D%E5%80%99%E9%80%89%E4%BA%BA%E7%9A%84%E6%80%BB%E6%8D%90%E8%B5%A0%E9%A2%9D%E5%8F%98%E5%8C%96%E8%B6%8B%E5%8A%BF"><span class="toc-number">5.6.</span> <span class="toc-text">收到捐赠额最多的两位候选人的总捐赠额变化趋势</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E5%88%B0%E6%8D%90%E8%B5%A0%E9%A2%9D%E6%9C%80%E5%A4%9A%E7%9A%84%E4%B8%A4%E4%BD%8D%E5%80%99%E9%80%89%E4%BA%BA%E7%9A%84%E5%90%84%E5%B7%9E%E6%8D%90%E8%B5%A0%E9%A2%9D%E5%AF%B9%E6%AF%94"><span class="toc-number">5.7.</span> <span class="toc-text">收到捐赠额最多的两位候选人的各州捐赠额对比</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/11/13/%E9%98%BF%E9%87%8C%E4%BA%91AI%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%E7%94%A8Pandas%E6%8F%AD%E7%A7%98%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E7%9A%84%E6%80%BB%E7%BB%9F%E5%96%9C%E5%A5%BD/" title="阿里云AI学习（二）用Pandas揭秘美国选民的总统喜好"><img src="/img/gallery/cover10.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="阿里云AI学习（二）用Pandas揭秘美国选民的总统喜好"/></a><div class="content"><a class="title" href="/2022/11/13/%E9%98%BF%E9%87%8C%E4%BA%91AI%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%E7%94%A8Pandas%E6%8F%AD%E7%A7%98%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E7%9A%84%E6%80%BB%E7%BB%9F%E5%96%9C%E5%A5%BD/" title="阿里云AI学习（二）用Pandas揭秘美国选民的总统喜好">阿里云AI学习（二）用Pandas揭秘美国选民的总统喜好</a><time datetime="2022-11-13T14:23:30.000Z" title="发表于 2022-11-13 22:23:30">2022-11-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/07/Anaconda%E4%B8%8Epip%E9%95%9C%E5%83%8F%E6%BA%90%E8%AE%BE%E7%BD%AE/" title="Anaconda与pip镜像源设置"><img src="/img/gallery/cover6.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Anaconda与pip镜像源设置"/></a><div class="content"><a class="title" href="/2022/11/07/Anaconda%E4%B8%8Epip%E9%95%9C%E5%83%8F%E6%BA%90%E8%AE%BE%E7%BD%AE/" title="Anaconda与pip镜像源设置">Anaconda与pip镜像源设置</a><time datetime="2022-11-07T13:13:43.000Z" title="发表于 2022-11-07 21:13:43">2022-11-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/06/Python%E5%87%BD%E6%95%B0%E5%AD%A6%E4%B9%A0/" title="Python函数学习笔记"><img src="/img/gallery/cover7.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python函数学习笔记"/></a><div class="content"><a class="title" href="/2022/11/06/Python%E5%87%BD%E6%95%B0%E5%AD%A6%E4%B9%A0/" title="Python函数学习笔记">Python函数学习笔记</a><time datetime="2022-11-06T12:42:43.000Z" title="发表于 2022-11-06 20:42:43">2022-11-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/06/%E9%98%BF%E9%87%8C%E4%BA%91AI%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89%E5%A4%A9%E6%B1%A0%E5%85%A5%E9%97%A8%E4%B8%8E%E5%AE%9E%E8%B7%B5/" title="阿里云AI学习（一）天池入门与实践笔记"><img src="/img/gallery/cover2.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="阿里云AI学习（一）天池入门与实践笔记"/></a><div class="content"><a class="title" href="/2022/11/06/%E9%98%BF%E9%87%8C%E4%BA%91AI%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89%E5%A4%A9%E6%B1%A0%E5%85%A5%E9%97%A8%E4%B8%8E%E5%AE%9E%E8%B7%B5/" title="阿里云AI学习（一）天池入门与实践笔记">阿里云AI学习（一）天池入门与实践笔记</a><time datetime="2022-11-06T01:40:43.000Z" title="发表于 2022-11-06 09:40:43">2022-11-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/03/%E7%BA%B3%E7%93%A6%E5%B0%94%E5%85%B3%E4%BA%8E%E7%94%9F%E6%B4%BB%E3%80%81%E5%B7%A5%E4%BD%9C%E5%92%8C%E6%99%BA%E6%85%A7%E7%9A%84%E8%AE%BF%E8%B0%88%E7%AC%94%E5%BD%95/" title="纳瓦尔关于生活、工作和智慧的访谈笔录"><img src="/img/gallery/cover4.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="纳瓦尔关于生活、工作和智慧的访谈笔录"/></a><div class="content"><a class="title" href="/2022/11/03/%E7%BA%B3%E7%93%A6%E5%B0%94%E5%85%B3%E4%BA%8E%E7%94%9F%E6%B4%BB%E3%80%81%E5%B7%A5%E4%BD%9C%E5%92%8C%E6%99%BA%E6%85%A7%E7%9A%84%E8%AE%BF%E8%B0%88%E7%AC%94%E5%BD%95/" title="纳瓦尔关于生活、工作和智慧的访谈笔录">纳瓦尔关于生活、工作和智慧的访谈笔录</a><time datetime="2022-11-02T23:15:00.000Z" title="发表于 2022-11-03 07:15:00">2022-11-03</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/gallery/cover10.png')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Jack Gan</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">知行合一，大道至简。</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/algoliasearch/dist/algoliasearch-lite.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"></div><div class="aplayer no-destroy" data-id="2129443857" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-autoplay="true" data-lrcType=“-1”> </div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>